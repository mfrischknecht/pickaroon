function te(e,t,r){return t=S(t),ce(e,K()?Reflect.construct(t,r||[],S(e).constructor):t.apply(e,r))}function q(e,t,r){if(K())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&k(o,r.prototype),o}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K=function(){return!!e})()}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J(Object(r),!0).forEach(function(n){oe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G(e){var t=ie(e,"string");return typeof t=="symbol"?t:t+""}function g(e){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(e)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,G(n.key),n)}}function m(e,t,r){return t&&Q(e.prototype,t),r&&Q(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oe(e,t,r){return t=G(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},S(e)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},k(e,t)}function ue(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function M(e){var t=typeof Map=="function"?new Map:void 0;return M=function(n){if(n===null||!ue(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,o)}function o(){return q(n,arguments,S(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),k(o,n)},M(e)}function se(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return se(e)}function H(e){return le(e)||he(e)||V(e)||fe()}function le(e){if(Array.isArray(e))return U(e)}function he(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function V(e,t){if(e){if(typeof e=="string")return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}}function U(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=V(e))||t){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,a=!1,s;return{s:function(){r=r.call(e)},n:function(){var u=r.next();return i=u.done,u},e:function(u){a=!0,s=u},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}}}var de=function(){function e(){A(this,e)}return m(e,[{key:"add",value:function(r,n,o){if(typeof arguments[0]!="string")for(var i in arguments[0])this.add(i,arguments[0][i],arguments[1]);else(Array.isArray(r)?r:[r]).forEach(function(a){this[a]=this[a]||[],n&&this[a][o?"unshift":"push"](n)},this)}},{key:"run",value:function(r,n){this[r]=this[r]||[],this[r].forEach(function(o){o.call(n&&n.context?n.context:n,n)})}}])}(),ye=function(){function e(t){A(this,e),this.jsep=t,this.registered={}}return m(e,[{key:"register",value:function(){for(var r=this,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];o.forEach(function(a){if(g(a)!=="object"||!a.name||!a.init)throw new Error("Invalid JSEP plugin format");r.registered[a.name]||(a.init(r.jsep),r.registered[a.name]=a)})}}])}(),E=function(){function e(t){A(this,e),this.expr=t,this.index=0}return m(e,[{key:"char",get:function(){return this.expr.charAt(this.index)}},{key:"code",get:function(){return this.expr.charCodeAt(this.index)}},{key:"throwError",value:function(r){var n=new Error(r+" at character "+this.index);throw n.index=this.index,n.description=r,n}},{key:"runHook",value:function(r,n){if(e.hooks[r]){var o={context:this,node:n};return e.hooks.run(r,o),o.node}return n}},{key:"searchHook",value:function(r){if(e.hooks[r]){var n={context:this};return e.hooks[r].find(function(o){return o.call(n.context,n),n.node}),n.node}}},{key:"gobbleSpaces",value:function(){for(var r=this.code;r===e.SPACE_CODE||r===e.TAB_CODE||r===e.LF_CODE||r===e.CR_CODE;)r=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}},{key:"parse",value:function(){this.runHook("before-all");var r=this.gobbleExpressions(),n=r.length===1?r[0]:{type:e.COMPOUND,body:r};return this.runHook("after-all",n)}},{key:"gobbleExpressions",value:function(r){for(var n=[],o,i;this.index<this.expr.length;)if(o=this.code,o===e.SEMCOL_CODE||o===e.COMMA_CODE)this.index++;else if(i=this.gobbleExpression())n.push(i);else if(this.index<this.expr.length){if(o===r)break;this.throwError('Unexpected "'+this.char+'"')}return n}},{key:"gobbleExpression",value:function(){var r=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",r)}},{key:"gobbleBinaryOp",value:function(){this.gobbleSpaces();for(var r=this.expr.substr(this.index,e.max_binop_len),n=r.length;n>0;){if(e.binary_ops.hasOwnProperty(r)&&(!e.isIdentifierStart(this.code)||this.index+r.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+r.length))))return this.index+=n,r;r=r.substr(0,--n)}return!1}},{key:"gobbleBinaryExpression",value:function(){var r,n,o,i,a,s,u,l,c;if(s=this.gobbleToken(),!s||(n=this.gobbleBinaryOp(),!n))return s;for(a={value:n,prec:e.binaryPrecedence(n),right_a:e.right_associative.has(n)},u=this.gobbleToken(),u||this.throwError("Expected expression after "+n),i=[s,a,u];n=this.gobbleBinaryOp();){if(o=e.binaryPrecedence(n),o===0){this.index-=n.length;break}a={value:n,prec:o,right_a:e.right_associative.has(n)},c=n;for(var h=function(b){return a.right_a&&b.right_a?o>b.prec:o<=b.prec};i.length>2&&h(i[i.length-2]);)u=i.pop(),n=i.pop().value,s=i.pop(),r={type:e.BINARY_EXP,operator:n,left:s,right:u},i.push(r);r=this.gobbleToken(),r||this.throwError("Expected expression after "+c),i.push(a,r)}for(l=i.length-1,r=i[l];l>1;)r={type:e.BINARY_EXP,operator:i[l-1].value,left:i[l-2],right:r},l-=2;return r}},{key:"gobbleToken",value:function(){var r,n,o,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(r=this.code,e.isDecimalDigit(r)||r===e.PERIOD_CODE)return this.gobbleNumericLiteral();if(r===e.SQUOTE_CODE||r===e.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(r===e.OBRACK_CODE)i=this.gobbleArray();else{for(n=this.expr.substr(this.index,e.max_unop_len),o=n.length;o>0;){if(e.unary_ops.hasOwnProperty(n)&&(!e.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=o;var a=this.gobbleToken();return a||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:e.UNARY_EXP,operator:n,argument:a,prefix:!0})}n=n.substr(0,--o)}e.isIdentifierStart(r)?(i=this.gobbleIdentifier(),e.literals.hasOwnProperty(i.name)?i={type:e.LITERAL,value:e.literals[i.name],raw:i.name}:i.name===e.this_str&&(i={type:e.THIS_EXP})):r===e.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}},{key:"gobbleTokenProperty",value:function(r){this.gobbleSpaces();for(var n=this.code;n===e.PERIOD_CODE||n===e.OBRACK_CODE||n===e.OPAREN_CODE||n===e.QUMARK_CODE;){var o=void 0;if(n===e.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==e.PERIOD_CODE)break;o=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===e.OBRACK_CODE?(r={type:e.MEMBER_EXP,computed:!0,object:r,property:this.gobbleExpression()},this.gobbleSpaces(),n=this.code,n!==e.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):n===e.OPAREN_CODE?r={type:e.CALL_EXP,arguments:this.gobbleArguments(e.CPAREN_CODE),callee:r}:(n===e.PERIOD_CODE||o)&&(o&&this.index--,this.gobbleSpaces(),r={type:e.MEMBER_EXP,computed:!1,object:r,property:this.gobbleIdentifier()}),o&&(r.optional=!0),this.gobbleSpaces(),n=this.code}return r}},{key:"gobbleNumericLiteral",value:function(){for(var r="",n,o;e.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);if(this.code===e.PERIOD_CODE)for(r+=this.expr.charAt(this.index++);e.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);if(n=this.char,n==="e"||n==="E"){for(r+=this.expr.charAt(this.index++),n=this.char,(n==="+"||n==="-")&&(r+=this.expr.charAt(this.index++));e.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);e.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+r+this.char+")")}return o=this.code,e.isIdentifierStart(o)?this.throwError("Variable names cannot start with a number ("+r+this.char+")"):(o===e.PERIOD_CODE||r.length===1&&r.charCodeAt(0)===e.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:e.LITERAL,value:parseFloat(r),raw:r}}},{key:"gobbleStringLiteral",value:function(){for(var r="",n=this.index,o=this.expr.charAt(this.index++),i=!1;this.index<this.expr.length;){var a=this.expr.charAt(this.index++);if(a===o){i=!0;break}else if(a==="\\")switch(a=this.expr.charAt(this.index++),a){case"n":r+=`
`;break;case"r":r+="\r";break;case"t":r+="	";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;default:r+=a}else r+=a}return i||this.throwError('Unclosed quote after "'+r+'"'),{type:e.LITERAL,value:r,raw:this.expr.substring(n,this.index)}}},{key:"gobbleIdentifier",value:function(){var r=this.code,n=this.index;for(e.isIdentifierStart(r)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(r=this.code,e.isIdentifierPart(r));)this.index++;return{type:e.IDENTIFIER,name:this.expr.slice(n,this.index)}}},{key:"gobbleArguments",value:function(r){for(var n=[],o=!1,i=0;this.index<this.expr.length;){this.gobbleSpaces();var a=this.code;if(a===r){o=!0,this.index++,r===e.CPAREN_CODE&&i&&i>=n.length&&this.throwError("Unexpected token "+String.fromCharCode(r));break}else if(a===e.COMMA_CODE){if(this.index++,i++,i!==n.length){if(r===e.CPAREN_CODE)this.throwError("Unexpected token ,");else if(r===e.CBRACK_CODE)for(var s=n.length;s<i;s++)n.push(null)}}else if(n.length!==i&&i!==0)this.throwError("Expected comma");else{var u=this.gobbleExpression();(!u||u.type===e.COMPOUND)&&this.throwError("Expected comma"),n.push(u)}}return o||this.throwError("Expected "+String.fromCharCode(r)),n}},{key:"gobbleGroup",value:function(){this.index++;var r=this.gobbleExpressions(e.CPAREN_CODE);if(this.code===e.CPAREN_CODE)return this.index++,r.length===1?r[0]:r.length?{type:e.SEQUENCE_EXP,expressions:r}:!1;this.throwError("Unclosed (")}},{key:"gobbleArray",value:function(){return this.index++,{type:e.ARRAY_EXP,elements:this.gobbleArguments(e.CBRACK_CODE)}}}],[{key:"version",get:function(){return"1.3.8"}},{key:"toString",value:function(){return"JavaScript Expression Parser (JSEP) v"+e.version}},{key:"addUnaryOp",value:function(r){return e.max_unop_len=Math.max(r.length,e.max_unop_len),e.unary_ops[r]=1,e}},{key:"addBinaryOp",value:function(r,n,o){return e.max_binop_len=Math.max(r.length,e.max_binop_len),e.binary_ops[r]=n,o?e.right_associative.add(r):e.right_associative.delete(r),e}},{key:"addIdentifierChar",value:function(r){return e.additional_identifier_chars.add(r),e}},{key:"addLiteral",value:function(r,n){return e.literals[r]=n,e}},{key:"removeUnaryOp",value:function(r){return delete e.unary_ops[r],r.length===e.max_unop_len&&(e.max_unop_len=e.getMaxKeyLen(e.unary_ops)),e}},{key:"removeAllUnaryOps",value:function(){return e.unary_ops={},e.max_unop_len=0,e}},{key:"removeIdentifierChar",value:function(r){return e.additional_identifier_chars.delete(r),e}},{key:"removeBinaryOp",value:function(r){return delete e.binary_ops[r],r.length===e.max_binop_len&&(e.max_binop_len=e.getMaxKeyLen(e.binary_ops)),e.right_associative.delete(r),e}},{key:"removeAllBinaryOps",value:function(){return e.binary_ops={},e.max_binop_len=0,e}},{key:"removeLiteral",value:function(r){return delete e.literals[r],e}},{key:"removeAllLiterals",value:function(){return e.literals={},e}},{key:"parse",value:function(r){return new e(r).parse()}},{key:"getMaxKeyLen",value:function(r){return Math.max.apply(Math,[0].concat(H(Object.keys(r).map(function(n){return n.length}))))}},{key:"isDecimalDigit",value:function(r){return r>=48&&r<=57}},{key:"binaryPrecedence",value:function(r){return e.binary_ops[r]||0}},{key:"isIdentifierStart",value:function(r){return r>=65&&r<=90||r>=97&&r<=122||r>=128&&!e.binary_ops[String.fromCharCode(r)]||e.additional_identifier_chars.has(String.fromCharCode(r))}},{key:"isIdentifierPart",value:function(r){return e.isIdentifierStart(r)||e.isDecimalDigit(r)}}])}(),be=new de;Object.assign(E,{hooks:be,plugins:new ye(E),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});E.max_unop_len=E.getMaxKeyLen(E.unary_ops);E.max_binop_len=E.getMaxKeyLen(E.binary_ops);var w=function(t){return new E(t).parse()},ve=Object.getOwnPropertyNames(E);ve.forEach(function(e){w[e]===void 0&&e!=="prototype"&&(w[e]=E[e])});w.Jsep=E;var ge="ConditionalExpression",Ee={name:"ternary",init:function(t){t.hooks.add("after-expression",function(n){if(n.node&&this.code===t.QUMARK_CODE){this.index++;var o=n.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===t.COLON_CODE){this.index++;var a=this.gobbleExpression();if(a||this.throwError("Expected expression"),n.node={type:ge,test:o,consequent:i,alternate:a},o.operator&&t.binary_ops[o.operator]<=.9){for(var s=o;s.right.operator&&t.binary_ops[s.right.operator]<=.9;)s=s.right;n.node.test=s.right,s.right=n.node,n.node=o}}else this.throwError("Expected :")}})}};w.plugins.register(Ee);var Y=47,_e=92,Fe={name:"regex",init:function(t){t.hooks.add("gobble-token",function(n){if(this.code===Y){for(var o=++this.index,i=!1;this.index<this.expr.length;){if(this.code===Y&&!i){for(var a=this.expr.slice(o,this.index),s="";++this.index<this.expr.length;){var u=this.code;if(u>=97&&u<=122||u>=65&&u<=90||u>=48&&u<=57)s+=this.char;else break}var l=void 0;try{l=new RegExp(a,s)}catch(c){this.throwError(c.message)}return n.node={type:t.LITERAL,value:l,raw:this.expr.slice(o-1,this.index)},n.node=this.gobbleTokenProperty(n.node),n.node}this.code===t.OBRACK_CODE?i=!0:i&&this.code===t.CBRACK_CODE&&(i=!1),this.index+=this.code===_e?2:1}this.throwError("Unclosed Regex")}})}},j=43,De=45,C={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|="]),updateOperators:[j,De],assignmentPrecedence:.9,init:function(t){var r=[t.IDENTIFIER,t.MEMBER_EXP];C.assignmentOperators.forEach(function(o){return t.addBinaryOp(o,C.assignmentPrecedence,!0)}),t.hooks.add("gobble-token",function(i){var a=this,s=this.code;C.updateOperators.some(function(u){return u===s&&u===a.expr.charCodeAt(a.index+1)})&&(this.index+=2,i.node={type:"UpdateExpression",operator:s===j?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},(!i.node.argument||!r.includes(i.node.argument.type))&&this.throwError("Unexpected ".concat(i.node.operator)))}),t.hooks.add("after-token",function(i){var a=this;if(i.node){var s=this.code;C.updateOperators.some(function(u){return u===s&&u===a.expr.charCodeAt(a.index+1)})&&(r.includes(i.node.type)||this.throwError("Unexpected ".concat(i.node.operator)),this.index+=2,i.node={type:"UpdateExpression",operator:s===j?"++":"--",argument:i.node,prefix:!1})}}),t.hooks.add("after-expression",function(i){i.node&&n(i.node)});function n(o){C.assignmentOperators.has(o.operator)?(o.type="AssignmentExpression",n(o.left),n(o.right)):o.operator||Object.values(o).forEach(function(i){i&&g(i)==="object"&&n(i)})}}},v=Object.prototype.hasOwnProperty;function D(e,t){return e=e.slice(),e.push(t),e}function $(e,t){return t=t.slice(),t.unshift(e),t}var xe=function(e){function t(r){var n;return A(this,t),n=te(this,t,['JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)']),n.avoidNew=!0,n.value=r,n.name="NewError",n}return ae(t,e),m(t)}(M(Error));function f(e,t,r,n,o){if(!(this instanceof f))try{return new f(e,t,r,n,o)}catch(u){if(!u.avoidNew)throw u;return u.value}typeof e=="string"&&(o=n,n=r,r=t,t=e,e=null);var i=e&&g(e)==="object";if(e=e||{},this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=v.call(e,"wrap")?e.wrap:!0,this.sandbox=e.sandbox||{},this.eval=e.eval===void 0?"safe":e.eval,this.ignoreEvalErrors=typeof e.ignoreEvalErrors>"u"?!1:e.ignoreEvalErrors,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||n||null,this.otherTypeCallback=e.otherTypeCallback||o||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},e.autostart!==!1){var a={path:i?e.path:t};i?"json"in e&&(a.json=e.json):a.json=r;var s=this.evaluate(a);if(!s||g(s)!=="object")throw new xe(s);return s}}f.prototype.evaluate=function(e,t,r,n){var o=this,i=this.parent,a=this.parentProperty,s=this.flatten,u=this.wrap;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,t=t||this.json,e=e||this.path,e&&g(e)==="object"&&!Array.isArray(e)){if(!e.path&&e.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!v.call(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');var l=e;t=l.json,s=v.call(e,"flatten")?e.flatten:s,this.currResultType=v.call(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=v.call(e,"sandbox")?e.sandbox:this.currSandbox,u=v.call(e,"wrap")?e.wrap:u,this.currEval=v.call(e,"eval")?e.eval:this.currEval,r=v.call(e,"callback")?e.callback:r,this.currOtherTypeCallback=v.call(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,i=v.call(e,"parent")?e.parent:i,a=v.call(e,"parentProperty")?e.parentProperty:a,e=e.path}if(i=i||null,a=a||null,Array.isArray(e)&&(e=f.toPathString(e)),!(!e&&e!==""||!t)){var c=f.toPathArray(e);c[0]==="$"&&c.length>1&&c.shift(),this._hasParentSelector=null;var h=this._trace(c,t,["$"],i,a,r).filter(function(p){return p&&!p.isParentSelector});return h.length?!u&&h.length===1&&!h[0].hasArrExpr?this._getPreferredOutput(h[0]):h.reduce(function(p,b){var F=o._getPreferredOutput(b);return s&&Array.isArray(F)?p=p.concat(F):p.push(F),p},[]):u?[]:void 0}};f.prototype._getPreferredOutput=function(e){var t=this.currResultType;switch(t){case"all":{var r=Array.isArray(e.path)?e.path:f.toPathArray(e.path);return e.pointer=f.toPointer(r),e.path=typeof e.path=="string"?e.path:f.toPathString(e.path),e}case"value":case"parent":case"parentProperty":return e[t];case"path":return f.toPathString(e[t]);case"pointer":return f.toPointer(e.path);default:throw new TypeError("Unknown result type")}};f.prototype._handleCallback=function(e,t,r){if(t){var n=this._getPreferredOutput(e);e.path=typeof e.path=="string"?e.path:f.toPathString(e.path),t(n,r,e)}};f.prototype._trace=function(e,t,r,n,o,i,a,s){var u=this,l;if(!e.length)return l={path:r,value:t,parent:n,parentProperty:o,hasArrExpr:a},this._handleCallback(l,i,"value"),l;var c=e[0],h=e.slice(1),p=[];function b(y){Array.isArray(y)?y.forEach(function(L){p.push(L)}):p.push(y)}if((typeof c!="string"||s)&&t&&v.call(t,c))b(this._trace(h,t[c],D(r,c),t,c,i,a));else if(c==="*")this._walk(t,function(y){b(u._trace(h,t[y],D(r,y),t,y,i,!0,!0))});else if(c==="..")b(this._trace(h,t,r,n,o,i,a)),this._walk(t,function(y){g(t[y])==="object"&&b(u._trace(e.slice(),t[y],D(r,y),t,y,i,!0))});else{if(c==="^")return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:h,isParentSelector:!0};if(c==="~")return l={path:D(r,c),value:o,parent:n,parentProperty:null},this._handleCallback(l,i,"property"),l;if(c==="$")b(this._trace(h,t,r,null,null,i,a));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(c))b(this._slice(c,h,t,r,n,o,i));else if(c.indexOf("?(")===0){if(this.currEval===!1)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var F=c.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),O=/@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])?((?:[\0->@-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))(?!(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])\)\])['\]]/g.exec(F);O?this._walk(t,function(y){var L=[O[2]],ee=O[1]?t[y][O[1]]:t[y],re=u._trace(L,ee,r,n,o,i,!0);re.length>0&&b(u._trace(h,t[y],D(r,y),t,y,i,!0))}):this._walk(t,function(y){u._eval(F,t[y],y,r,n,o)&&b(u._trace(h,t[y],D(r,y),t,y,i,!0))})}else if(c[0]==="("){if(this.currEval===!1)throw new Error("Eval [(expr)] prevented in JSONPath expression.");b(this._trace($(this._eval(c,t,r[r.length-1],r.slice(0,-1),n,o),h),t,r,n,o,i,a))}else if(c[0]==="@"){var _=!1,B=c.slice(1,-2);switch(B){case"scalar":(!t||!["object","function"].includes(g(t)))&&(_=!0);break;case"boolean":case"string":case"undefined":case"function":g(t)===B&&(_=!0);break;case"integer":Number.isFinite(t)&&!(t%1)&&(_=!0);break;case"number":Number.isFinite(t)&&(_=!0);break;case"nonFinite":typeof t=="number"&&!Number.isFinite(t)&&(_=!0);break;case"object":t&&g(t)===B&&(_=!0);break;case"array":Array.isArray(t)&&(_=!0);break;case"other":_=this.currOtherTypeCallback(t,r,n,o);break;case"null":t===null&&(_=!0);break;default:throw new TypeError("Unknown value type "+B)}if(_)return l={path:r,value:t,parent:n,parentProperty:o},this._handleCallback(l,i,"value"),l}else if(c[0]==="`"&&t&&v.call(t,c.slice(1))){var N=c.slice(1);b(this._trace(h,t[N],D(r,N),t,N,i,a,!0))}else if(c.includes(",")){var z=c.split(","),I=pe(z),X;try{for(I.s();!(X=I.n()).done;){var W=X.value;b(this._trace($(W,h),t,r,n,o,i,!0))}}catch(y){I.e(y)}finally{I.f()}}else!s&&t&&v.call(t,c)&&b(this._trace(h,t[c],D(r,c),t,c,i,a,!0))}if(this._hasParentSelector)for(var x=0;x<p.length;x++){var R=p[x];if(R&&R.isParentSelector){var P=this._trace(R.expr,t,R.path,n,o,i,a);if(Array.isArray(P)){p[x]=P[0];for(var Z=P.length,T=1;T<Z;T++)x++,p.splice(x,0,P[T])}else p[x]=P}}return p};f.prototype._walk=function(e,t){if(Array.isArray(e))for(var r=e.length,n=0;n<r;n++)t(n);else e&&g(e)==="object"&&Object.keys(e).forEach(function(o){t(o)})};f.prototype._slice=function(e,t,r,n,o,i,a){if(Array.isArray(r)){var s=r.length,u=e.split(":"),l=u[2]&&Number.parseInt(u[2])||1,c=u[0]&&Number.parseInt(u[0])||0,h=u[1]&&Number.parseInt(u[1])||s;c=c<0?Math.max(0,c+s):Math.min(s,c),h=h<0?Math.max(0,h+s):Math.min(s,h);for(var p=[],b=c;b<h;b+=l){var F=this._trace($(b,t),r,n,o,i,a,!0);F.forEach(function(O){p.push(O)})}return p}};f.prototype._eval=function(e,t,r,n,o,i){var a=this;this.currSandbox._$_parentProperty=i,this.currSandbox._$_parent=o,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=t;var s=e.includes("@path");s&&(this.currSandbox._$_path=f.toPathString(n.concat([r])));var u=this.currEval+"Script:"+e;if(!f.cache[u]){var l=e.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");if(s&&(l=l.replace(/@path/g,"_$_path")),this.currEval==="safe"||this.currEval===!0||this.currEval===void 0)f.cache[u]=new this.safeVm.Script(l);else if(this.currEval==="native")f.cache[u]=new this.vm.Script(l);else if(typeof this.currEval=="function"&&this.currEval.prototype&&v.call(this.currEval.prototype,"runInNewContext")){var c=this.currEval;f.cache[u]=new c(l)}else if(typeof this.currEval=="function")f.cache[u]={runInNewContext:function(p){return a.currEval(l,p)}};else throw new TypeError('Unknown "eval" property "'.concat(this.currEval,'"'))}try{return f.cache[u].runInNewContext(this.currSandbox)}catch(h){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+h.message+": "+e)}};f.cache={};f.toPathString=function(e){for(var t=e,r=t.length,n="$",o=1;o<r;o++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[o])||(n+=/^[\*0-9]+$/.test(t[o])?"["+t[o]+"]":"['"+t[o]+"']");return n};f.toPointer=function(e){for(var t=e,r=t.length,n="",o=1;o<r;o++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[o])||(n+="/"+t[o].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return n};f.toPathArray=function(e){var t=f.cache;if(t[e])return t[e].concat();var r=[],n=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]](?!(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])\])/g,function(i,a){return"[#"+(r.push(a)-1)+"]"}).replace(/\[["']((?:[\0-&\(-\\\^-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)["']\]/g,function(i,a){return"['"+a.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:[\0-Z\\-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(i,a){return";"+a.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),o=n.split(";").map(function(i){var a=i.match(/#([0-9]+)/);return!a||!a[1]?i:r[a[1]]});return t[e]=o,t[e].concat()};var Oe=function(t,r,n){for(var o=t.length,i=0;i<o;i++){var a=t[i];n(a)&&r.push(t.splice(i--,1)[0])}};w.plugins.register(Fe,C);var d={evalAst:function(t,r){switch(t.type){case"BinaryExpression":case"LogicalExpression":return d.evalBinaryExpression(t,r);case"Compound":return d.evalCompound(t,r);case"ConditionalExpression":return d.evalConditionalExpression(t,r);case"Identifier":return d.evalIdentifier(t,r);case"Literal":return d.evalLiteral(t,r);case"MemberExpression":return d.evalMemberExpression(t,r);case"UnaryExpression":return d.evalUnaryExpression(t,r);case"ArrayExpression":return d.evalArrayExpression(t,r);case"CallExpression":return d.evalCallExpression(t,r);case"AssignmentExpression":return d.evalAssignmentExpression(t,r);default:throw SyntaxError("Unexpected expression",t)}},evalBinaryExpression:function(t,r){var n={"||":function(i,a){return i||a()},"&&":function(i,a){return i&&a()},"|":function(i,a){return i|a()},"^":function(i,a){return i^a()},"&":function(i,a){return i&a()},"==":function(i,a){return i==a()},"!=":function(i,a){return i!=a()},"===":function(i,a){return i===a()},"!==":function(i,a){return i!==a()},"<":function(i,a){return i<a()},">":function(i,a){return i>a()},"<=":function(i,a){return i<=a()},">=":function(i,a){return i>=a()},"<<":function(i,a){return i<<a()},">>":function(i,a){return i>>a()},">>>":function(i,a){return i>>>a()},"+":function(i,a){return i+a()},"-":function(i,a){return i-a()},"*":function(i,a){return i*a()},"/":function(i,a){return i/a()},"%":function(i,a){return i%a()}}[t.operator](d.evalAst(t.left,r),function(){return d.evalAst(t.right,r)});return n},evalCompound:function(t,r){for(var n,o=0;o<t.body.length;o++){t.body[o].type==="Identifier"&&["var","let","const"].includes(t.body[o].name)&&t.body[o+1]&&t.body[o+1].type==="AssignmentExpression"&&(o+=1);var i=t.body[o];n=d.evalAst(i,r)}return n},evalConditionalExpression:function(t,r){return d.evalAst(t.test,r)?d.evalAst(t.consequent,r):d.evalAst(t.alternate,r)},evalIdentifier:function(t,r){if(t.name in r)return r[t.name];throw ReferenceError("".concat(t.name," is not defined"))},evalLiteral:function(t){return t.value},evalMemberExpression:function(t,r){var n=t.computed?d.evalAst(t.property):t.property.name,o=d.evalAst(t.object,r),i=o[n];return typeof i=="function"?i.bind(o):i},evalUnaryExpression:function(t,r){var n={"-":function(i){return-d.evalAst(i,r)},"!":function(i){return!d.evalAst(i,r)},"~":function(i){return~d.evalAst(i,r)},"+":function(i){return+d.evalAst(i,r)}}[t.operator](t.argument);return n},evalArrayExpression:function(t,r){return t.elements.map(function(n){return d.evalAst(n,r)})},evalCallExpression:function(t,r){var n=t.arguments.map(function(i){return d.evalAst(i,r)}),o=d.evalAst(t.callee,r);return o.apply(void 0,H(n))},evalAssignmentExpression:function(t,r){if(t.left.type!=="Identifier")throw SyntaxError("Invalid left-hand side in assignment");var n=t.left.name,o=d.evalAst(t.right,r);return r[n]=o,r[n]}},Ce=function(){function e(t){A(this,e),this.code=t,this.ast=w(this.code)}return m(e,[{key:"runInNewContext",value:function(r){var n=ne({},r);return d.evalAst(this.ast,n)}}])}(),we=function(){function e(t){A(this,e),this.code=t}return m(e,[{key:"runInNewContext",value:function(r){var n=this.code,o=Object.keys(r),i=[];Oe(o,i,function(c){return typeof r[c]=="function"});var a=o.map(function(c){return r[c]}),s=i.reduce(function(c,h){var p=r[h].toString();return/function/.test(p)||(p="function "+p),"var "+h+"="+p+";"+c},"");n=s+n,!/(["'])use strict\1/.test(n)&&!o.includes("arguments")&&(n="var arguments = undefined;"+n),n=n.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"");var u=n.lastIndexOf(";"),l=u>-1?n.slice(0,u+1)+" return "+n.slice(u+1):" return "+n;return q(Function,o.concat([l])).apply(void 0,H(a))}}])}();f.prototype.vm={Script:we};f.prototype.safeVm={Script:Ce};JSON.query=(e,t)=>f({path:t,json:e});let Ae=`
    declare global {
        interface JSON {
            query(object: any, jsonPath: string): any;
        }
    };

    export {};
`;export{Ae as typescriptDeclarations};
