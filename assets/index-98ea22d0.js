function _(t){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(t)}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t,e,r){return e&&I(t.prototype,e),r&&I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function H(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P(t)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,u){return n.__proto__=u,n},O(t,e)}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function D(t,e,r){return J()?D=Reflect.construct.bind():D=function(u,i,a){var f=[null];f.push.apply(f,i);var c=Function.bind.apply(u,f),y=new c;return a&&O(y,a.prototype),y},D.apply(null,arguments)}function L(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function T(t){var e=typeof Map=="function"?new Map:void 0;return T=function(n){if(n===null||!L(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,u)}function u(){return D(n,arguments,P(this).constructor)}return u.prototype=Object.create(n.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),O(u,n)},T(t)}function W(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W(t)}function x(t){var e=J();return function(){var n=P(t),u;if(e){var i=P(this).constructor;u=Reflect.construct(n,arguments,i)}else u=n.apply(this,arguments);return K(this,u)}}function G(t){return Q(t)||V(t)||M(t)||X()}function Q(t){if(Array.isArray(t))return C(t)}function V(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function M(t,e){if(t){if(typeof t=="string")return C(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(t,e)}}function C(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function X(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=M(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,u=function(){};return{s:u,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,a=!1,f;return{s:function(){r=r.call(t)},n:function(){var c=r.next();return i=c.done,c},e:function(c){a=!0,f=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(a)throw f}}}}var F=Object.prototype.hasOwnProperty;function w(t,e){return t=t.slice(),t.push(e),t}function k(t,e){return e=e.slice(),e.unshift(t),e}var tt=function(t){H(r,t);var e=x(r);function r(n){var u;return N(this,r),u=e.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),u.avoidNew=!0,u.value=n,u.name="NewError",u}return R(r)}(T(Error));function s(t,e,r,n,u){if(!(this instanceof s))try{return new s(t,e,r,n,u)}catch(c){if(!c.avoidNew)throw c;return c.value}typeof t=="string"&&(u=n,n=r,r=e,e=t,t=null);var i=t&&_(t)==="object";if(t=t||{},this.json=t.json||r,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=F.call(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.preventEval=t.preventEval||!1,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||n||null,this.otherTypeCallback=t.otherTypeCallback||u||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){var a={path:i?t.path:e};i?"json"in t&&(a.json=t.json):a.json=r;var f=this.evaluate(a);if(!f||_(f)!=="object")throw new tt(f);return f}}s.prototype.evaluate=function(t,e,r,n){var u=this,i=this.parent,a=this.parentProperty,f=this.flatten,c=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&_(t)==="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!F.call(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');var y=t;e=y.json,f=F.call(t,"flatten")?t.flatten:f,this.currResultType=F.call(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=F.call(t,"sandbox")?t.sandbox:this.currSandbox,c=F.call(t,"wrap")?t.wrap:c,this.currPreventEval=F.call(t,"preventEval")?t.preventEval:this.currPreventEval,r=F.call(t,"callback")?t.callback:r,this.currOtherTypeCallback=F.call(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,i=F.call(t,"parent")?t.parent:i,a=F.call(t,"parentProperty")?t.parentProperty:a,t=t.path}if(i=i||null,a=a||null,Array.isArray(t)&&(t=s.toPathString(t)),!(!t&&t!==""||!e)){var o=s.toPathArray(t);o[0]==="$"&&o.length>1&&o.shift(),this._hasParentSelector=null;var l=this._trace(o,e,["$"],i,a,r).filter(function(h){return h&&!h.isParentSelector});return l.length?!c&&l.length===1&&!l[0].hasArrExpr?this._getPreferredOutput(l[0]):l.reduce(function(h,v){var g=u._getPreferredOutput(v);return f&&Array.isArray(g)?h=h.concat(g):h.push(g),h},[]):c?[]:void 0}};s.prototype._getPreferredOutput=function(t){var e=this.currResultType;switch(e){case"all":{var r=Array.isArray(t.path)?t.path:s.toPathArray(t.path);return t.pointer=s.toPointer(r),t.path=typeof t.path=="string"?t.path:s.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return s.toPathString(t[e]);case"pointer":return s.toPointer(t.path);default:throw new TypeError("Unknown result type")}};s.prototype._handleCallback=function(t,e,r){if(e){var n=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:s.toPathString(t.path),e(n,r,t)}};s.prototype._trace=function(t,e,r,n,u,i,a,f){var c=this,y;if(!t.length)return y={path:r,value:e,parent:n,parentProperty:u,hasArrExpr:a},this._handleCallback(y,i,"value"),y;var o=t[0],l=t.slice(1),h=[];function v(p){Array.isArray(p)?p.forEach(function(z){h.push(z)}):h.push(p)}if((typeof o!="string"||f)&&e&&F.call(e,o))v(this._trace(l,e[o],w(r,o),e,o,i,a));else if(o==="*")this._walk(e,function(p){v(c._trace(l,e[p],w(r,p),e,p,i,!0,!0))});else if(o==="..")v(this._trace(l,e,r,n,u,i,a)),this._walk(e,function(p){_(e[p])==="object"&&v(c._trace(t.slice(),e[p],w(r,p),e,p,i,!0))});else{if(o==="^")return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:l,isParentSelector:!0};if(o==="~")return y={path:w(r,o),value:u,parent:n,parentProperty:null},this._handleCallback(y,i,"property"),y;if(o==="$")v(this._trace(l,e,r,null,null,i,a));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(o))v(this._slice(o,l,e,r,n,u,i));else if(o.indexOf("?(")===0){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var g=o.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1");this._walk(e,function(p){c._eval(g,e[p],p,r,n,u)&&v(c._trace(l,e[p],w(r,p),e,p,i,!0))})}else if(o[0]==="("){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");v(this._trace(k(this._eval(o,e,r[r.length-1],r.slice(0,-1),n,u),l),e,r,n,u,i,a))}else if(o[0]==="@"){var b=!1,m=o.slice(1,-2);switch(m){case"scalar":(!e||!["object","function"].includes(_(e)))&&(b=!0);break;case"boolean":case"string":case"undefined":case"function":_(e)===m&&(b=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(b=!0);break;case"number":Number.isFinite(e)&&(b=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(b=!0);break;case"object":e&&_(e)===m&&(b=!0);break;case"array":Array.isArray(e)&&(b=!0);break;case"other":b=this.currOtherTypeCallback(e,r,n,u);break;case"null":e===null&&(b=!0);break;default:throw new TypeError("Unknown value type "+m)}if(b)return y={path:r,value:e,parent:n,parentProperty:u},this._handleCallback(y,i,"value"),y}else if(o[0]==="`"&&e&&F.call(e,o.slice(1))){var j=o.slice(1);v(this._trace(l,e[j],w(r,j),e,j,i,a,!0))}else if(o.includes(",")){var U=o.split(","),A=Z(U),B;try{for(A.s();!(B=A.n()).done;){var Y=B.value;v(this._trace(k(Y,l),e,r,n,u,i,!0))}}catch(p){A.e(p)}finally{A.f()}}else!f&&e&&F.call(e,o)&&v(this._trace(l,e[o],w(r,o),e,o,i,a,!0))}if(this._hasParentSelector)for(var d=0;d<h.length;d++){var E=h[d];if(E&&E.isParentSelector){var S=this._trace(E.expr,e,E.path,n,u,i,a);if(Array.isArray(S)){h[d]=S[0];for(var q=S.length,$=1;$<q;$++)d++,h.splice(d,0,S[$])}else h[d]=S}}return h};s.prototype._walk=function(t,e){if(Array.isArray(t))for(var r=t.length,n=0;n<r;n++)e(n);else t&&_(t)==="object"&&Object.keys(t).forEach(function(u){e(u)})};s.prototype._slice=function(t,e,r,n,u,i,a){if(Array.isArray(r)){var f=r.length,c=t.split(":"),y=c[2]&&Number.parseInt(c[2])||1,o=c[0]&&Number.parseInt(c[0])||0,l=c[1]&&Number.parseInt(c[1])||f;o=o<0?Math.max(0,o+f):Math.min(f,o),l=l<0?Math.max(0,l+f):Math.min(f,l);for(var h=[],v=o;v<l;v+=y){var g=this._trace(k(v,e),r,n,u,i,a,!0);g.forEach(function(b){h.push(b)})}return h}};s.prototype._eval=function(t,e,r,n,u,i){this.currSandbox._$_parentProperty=i,this.currSandbox._$_parent=u,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;var a=t.includes("@path");a&&(this.currSandbox._$_path=s.toPathString(n.concat([r])));var f="script:"+t;if(!s.cache[f]){var c=t.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");a&&(c=c.replace(/@path/g,"_$_path")),s.cache[f]=new this.vm.Script(c)}try{return s.cache[f].runInNewContext(this.currSandbox)}catch(y){throw new Error("jsonPath: "+y.message+": "+t)}};s.cache={};s.toPathString=function(t){for(var e=t,r=e.length,n="$",u=1;u<r;u++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[u])||(n+=/^[\*0-9]+$/.test(e[u])?"["+e[u]+"]":"['"+e[u]+"']");return n};s.toPointer=function(t){for(var e=t,r=e.length,n="",u=1;u<r;u++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[u])||(n+="/"+e[u].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return n};s.toPathArray=function(t){var e=s.cache;if(e[t])return e[t].concat();var r=[],n=t.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(i,a){return"[#"+(r.push(a)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(i,a){return"['"+a.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(i,a){return";"+a.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),u=n.split(";").map(function(i){var a=i.match(/#([0-9]+)/);return!a||!a[1]?i:r[a[1]]});return e[t]=u,e[t].concat()};var et=function(e,r,n){for(var u=e.length,i=0;i<u;i++){var a=e[i];n(a)&&r.push(e.splice(i--,1)[0])}},rt=function(){function t(e){N(this,t),this.code=e}return R(t,[{key:"runInNewContext",value:function(r){var n=this.code,u=Object.keys(r),i=[];et(u,i,function(o){return typeof r[o]=="function"});var a=u.map(function(o,l){return r[o]}),f=i.reduce(function(o,l){var h=r[l].toString();return/function/.test(h)||(h="function "+h),"var "+l+"="+h+";"+o},"");n=f+n,!/(["'])use strict\1/.test(n)&&!u.includes("arguments")&&(n="var arguments = undefined;"+n),n=n.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"");var c=n.lastIndexOf(";"),y=c>-1?n.slice(0,c+1)+" return "+n.slice(c+1):" return "+n;return D(Function,u.concat([y])).apply(void 0,G(a))}}]),t}();s.prototype.vm={Script:rt};JSON.query=(t,e)=>s({path:e,json:t});let nt=`
    declare global {
        interface JSON {
            query(object: any, jsonPath: string): any;
        }
    };

    export {};
`;export{nt as typescriptDeclarations};
