"use strict";(self.webpackChunklogs=self.webpackChunklogs||[]).push([[8401],{71653:(e,t,i)=>{i.r(t),i.d(t,{Adapter:()=>h,CodeActionAdaptor:()=>O,DefinitionAdapter:()=>x,DiagnosticsAdapter:()=>f,FormatAdapter:()=>T,FormatHelper:()=>L,FormatOnTypeAdapter:()=>P,InlayHintsAdapter:()=>K,Kind:()=>A,LibFiles:()=>b,OccurrencesAdapter:()=>k,OutlineAdapter:()=>C,QuickInfoAdapter:()=>S,ReferenceAdapter:()=>v,RenameAdapter:()=>N,SignatureHelpAdapter:()=>w,SuggestAdapter:()=>_,WorkerManager:()=>u,flattenDiagnosticMessageText:()=>p,getJavaScriptWorker:()=>E,getTypeScriptWorker:()=>H,setupJavaScript:()=>R,setupTypeScript:()=>M});var s=i(87763),r=i(39585),n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,c=(e,t,i)=>(((e,t,i)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i})(e,"symbol"!=typeof t?t+"":t,i),i),d={};((e,t,i,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of o(t))l.call(e,i)||"default"===i||n(e,i,{get:()=>t[i],enumerable:!(s=a(t,i))||s.enumerable})})(d,s);var u=class{_modeId;_defaults;_configChangeListener;_updateExtraLibsToken;_extraLibsChangeListener;_worker;_client;constructor(e,t){this._modeId=e,this._defaults=t,this._worker=null,this._client=null,this._configChangeListener=this._defaults.onDidChange((()=>this._stopWorker())),this._updateExtraLibsToken=0,this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange((()=>this._updateExtraLibs()))}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){this._configChangeListener.dispose(),this._extraLibsChangeListener.dispose(),this._stopWorker()}async _updateExtraLibs(){if(!this._worker)return;const e=++this._updateExtraLibsToken,t=await this._worker.getProxy();this._updateExtraLibsToken===e&&t.updateExtraLibs(this._defaults.getExtraLibs())}_getClient(){if(!this._client){this._worker=d.editor.createWebWorker({moduleId:"vs/language/typescript/tsWorker",label:this._modeId,keepIdleModels:!0,createData:{compilerOptions:this._defaults.getCompilerOptions(),extraLibs:this._defaults.getExtraLibs(),customWorkerPath:this._defaults.workerOptions.customWorkerPath,inlayHintsOptions:this._defaults.inlayHintsOptions}});let e=this._worker.getProxy();this._defaults.getEagerModelSync()&&(e=e.then((e=>this._worker?this._worker.withSyncedResources(d.editor.getModels().filter((e=>e.getLanguageId()===this._modeId)).map((e=>e.uri))):e))),this._client=e}return this._client}getLanguageServiceWorker(...e){let t;return this._getClient().then((e=>{t=e})).then((t=>{if(this._worker)return this._worker.withSyncedResources(e)})).then((e=>t))}},g={};function p(e,t,i=0){if("string"==typeof e)return e;if(void 0===e)return"";let s="";if(i){s+=t;for(let e=0;e<i;e++)s+="  "}if(s+=e.messageText,i++,e.next)for(const r of e.next)s+=p(r,t,i);return s}function m(e){return e?e.map((e=>e.text)).join(""):""}g["lib.d.ts"]=!0,g["lib.dom.d.ts"]=!0,g["lib.dom.iterable.d.ts"]=!0,g["lib.es2015.collection.d.ts"]=!0,g["lib.es2015.core.d.ts"]=!0,g["lib.es2015.d.ts"]=!0,g["lib.es2015.generator.d.ts"]=!0,g["lib.es2015.iterable.d.ts"]=!0,g["lib.es2015.promise.d.ts"]=!0,g["lib.es2015.proxy.d.ts"]=!0,g["lib.es2015.reflect.d.ts"]=!0,g["lib.es2015.symbol.d.ts"]=!0,g["lib.es2015.symbol.wellknown.d.ts"]=!0,g["lib.es2016.array.include.d.ts"]=!0,g["lib.es2016.d.ts"]=!0,g["lib.es2016.full.d.ts"]=!0,g["lib.es2017.d.ts"]=!0,g["lib.es2017.full.d.ts"]=!0,g["lib.es2017.intl.d.ts"]=!0,g["lib.es2017.object.d.ts"]=!0,g["lib.es2017.sharedmemory.d.ts"]=!0,g["lib.es2017.string.d.ts"]=!0,g["lib.es2017.typedarrays.d.ts"]=!0,g["lib.es2018.asyncgenerator.d.ts"]=!0,g["lib.es2018.asynciterable.d.ts"]=!0,g["lib.es2018.d.ts"]=!0,g["lib.es2018.full.d.ts"]=!0,g["lib.es2018.intl.d.ts"]=!0,g["lib.es2018.promise.d.ts"]=!0,g["lib.es2018.regexp.d.ts"]=!0,g["lib.es2019.array.d.ts"]=!0,g["lib.es2019.d.ts"]=!0,g["lib.es2019.full.d.ts"]=!0,g["lib.es2019.object.d.ts"]=!0,g["lib.es2019.string.d.ts"]=!0,g["lib.es2019.symbol.d.ts"]=!0,g["lib.es2020.bigint.d.ts"]=!0,g["lib.es2020.d.ts"]=!0,g["lib.es2020.full.d.ts"]=!0,g["lib.es2020.intl.d.ts"]=!0,g["lib.es2020.promise.d.ts"]=!0,g["lib.es2020.sharedmemory.d.ts"]=!0,g["lib.es2020.string.d.ts"]=!0,g["lib.es2020.symbol.wellknown.d.ts"]=!0,g["lib.es2021.d.ts"]=!0,g["lib.es2021.full.d.ts"]=!0,g["lib.es2021.intl.d.ts"]=!0,g["lib.es2021.promise.d.ts"]=!0,g["lib.es2021.string.d.ts"]=!0,g["lib.es2021.weakref.d.ts"]=!0,g["lib.es5.d.ts"]=!0,g["lib.es6.d.ts"]=!0,g["lib.esnext.d.ts"]=!0,g["lib.esnext.full.d.ts"]=!0,g["lib.esnext.intl.d.ts"]=!0,g["lib.esnext.promise.d.ts"]=!0,g["lib.esnext.string.d.ts"]=!0,g["lib.esnext.weakref.d.ts"]=!0,g["lib.scripthost.d.ts"]=!0,g["lib.webworker.d.ts"]=!0,g["lib.webworker.importscripts.d.ts"]=!0,g["lib.webworker.iterable.d.ts"]=!0;var h=class{constructor(e){this._worker=e}_textSpanToRange(e,t){let i=e.getPositionAt(t.start),s=e.getPositionAt(t.start+t.length),{lineNumber:r,column:n}=i,{lineNumber:a,column:o}=s;return{startLineNumber:r,startColumn:n,endLineNumber:a,endColumn:o}}},b=class{constructor(e){this._worker=e,this._libFiles={},this._hasFetchedLibFiles=!1,this._fetchLibFilesPromise=null}_libFiles;_hasFetchedLibFiles;_fetchLibFilesPromise;isLibFile(e){return!!e&&0===e.path.indexOf("/lib.")&&!!g[e.path.slice(1)]}getOrCreateModel(e){const t=d.Uri.parse(e),i=d.editor.getModel(t);if(i)return i;if(this.isLibFile(t)&&this._hasFetchedLibFiles)return d.editor.createModel(this._libFiles[t.path.slice(1)],"typescript",t);const s=r.typescriptDefaults.getExtraLibs()[e];return s?d.editor.createModel(s.content,"typescript",t):null}_containsLibFile(e){for(let t of e)if(this.isLibFile(t))return!0;return!1}async fetchLibFilesIfNecessary(e){this._containsLibFile(e)&&await this._fetchLibFiles()}_fetchLibFiles(){return this._fetchLibFilesPromise||(this._fetchLibFilesPromise=this._worker().then((e=>e.getLibFiles())).then((e=>{this._hasFetchedLibFiles=!0,this._libFiles=e}))),this._fetchLibFilesPromise}},f=class extends h{constructor(e,t,i,s){super(s),this._libFiles=e,this._defaults=t,this._selector=i;const r=e=>{if(e.getLanguageId()!==i)return;const t=()=>{const{onlyVisible:t}=this._defaults.getDiagnosticsOptions();t?e.isAttachedToEditor()&&this._doValidate(e):this._doValidate(e)};let s;const r=e.onDidChangeContent((()=>{clearTimeout(s),s=window.setTimeout(t,500)})),n=e.onDidChangeAttached((()=>{const{onlyVisible:i}=this._defaults.getDiagnosticsOptions();i&&(e.isAttachedToEditor()?t():d.editor.setModelMarkers(e,this._selector,[]))}));this._listener[e.uri.toString()]={dispose(){r.dispose(),n.dispose(),clearTimeout(s)}},t()},n=e=>{d.editor.setModelMarkers(e,this._selector,[]);const t=e.uri.toString();this._listener[t]&&(this._listener[t].dispose(),delete this._listener[t])};this._disposables.push(d.editor.onDidCreateModel((e=>r(e)))),this._disposables.push(d.editor.onWillDisposeModel(n)),this._disposables.push(d.editor.onDidChangeModelLanguage((e=>{n(e.model),r(e.model)}))),this._disposables.push({dispose(){for(const e of d.editor.getModels())n(e)}});const a=()=>{for(const e of d.editor.getModels())n(e),r(e)};this._disposables.push(this._defaults.onDidChange(a)),this._disposables.push(this._defaults.onDidExtraLibsChange(a)),d.editor.getModels().forEach((e=>r(e)))}_disposables=[];_listener=Object.create(null);dispose(){this._disposables.forEach((e=>e&&e.dispose())),this._disposables=[]}async _doValidate(e){const t=await this._worker(e.uri);if(e.isDisposed())return;const i=[],{noSyntaxValidation:s,noSemanticValidation:r,noSuggestionDiagnostics:n}=this._defaults.getDiagnosticsOptions();s||i.push(t.getSyntacticDiagnostics(e.uri.toString())),r||i.push(t.getSemanticDiagnostics(e.uri.toString())),n||i.push(t.getSuggestionDiagnostics(e.uri.toString()));const a=await Promise.all(i);if(!a||e.isDisposed())return;const o=a.reduce(((e,t)=>t.concat(e)),[]).filter((e=>-1===(this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(e.code))),l=o.map((e=>e.relatedInformation||[])).reduce(((e,t)=>t.concat(e)),[]).map((e=>e.file?d.Uri.parse(e.file.fileName):null));await this._libFiles.fetchLibFilesIfNecessary(l),e.isDisposed()||d.editor.setModelMarkers(e,this._selector,o.map((t=>this._convertDiagnostics(e,t))))}_convertDiagnostics(e,t){const i=t.start||0,s=t.length||1,{lineNumber:r,column:n}=e.getPositionAt(i),{lineNumber:a,column:o}=e.getPositionAt(i+s),l=[];return t.reportsUnnecessary&&l.push(d.MarkerTag.Unnecessary),t.reportsDeprecated&&l.push(d.MarkerTag.Deprecated),{severity:this._tsDiagnosticCategoryToMarkerSeverity(t.category),startLineNumber:r,startColumn:n,endLineNumber:a,endColumn:o,message:p(t.messageText,"\n"),code:t.code.toString(),tags:l,relatedInformation:this._convertRelatedInformation(e,t.relatedInformation)}}_convertRelatedInformation(e,t){if(!t)return[];const i=[];return t.forEach((t=>{let s=e;if(t.file&&(s=this._libFiles.getOrCreateModel(t.file.fileName)),!s)return;const r=t.start||0,n=t.length||1,{lineNumber:a,column:o}=s.getPositionAt(r),{lineNumber:l,column:c}=s.getPositionAt(r+n);i.push({resource:s.uri,startLineNumber:a,startColumn:o,endLineNumber:l,endColumn:c,message:p(t.messageText,"\n")})})),i}_tsDiagnosticCategoryToMarkerSeverity(e){switch(e){case 1:return d.MarkerSeverity.Error;case 3:return d.MarkerSeverity.Info;case 0:return d.MarkerSeverity.Warning;case 2:return d.MarkerSeverity.Hint}return d.MarkerSeverity.Info}},_=class extends h{get triggerCharacters(){return["."]}async provideCompletionItems(e,t,i,s){const r=e.getWordUntilPosition(t),n=new d.Range(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn),a=e.uri,o=e.getOffsetAt(t),l=await this._worker(a);if(e.isDisposed())return;const c=await l.getCompletionsAtPosition(a.toString(),o);return c&&!e.isDisposed()?{suggestions:c.entries.map((i=>{let s=n;if(i.replacementSpan){const t=e.getPositionAt(i.replacementSpan.start),r=e.getPositionAt(i.replacementSpan.start+i.replacementSpan.length);s=new d.Range(t.lineNumber,t.column,r.lineNumber,r.column)}const r=[];return-1!==i.kindModifiers?.indexOf("deprecated")&&r.push(d.languages.CompletionItemTag.Deprecated),{uri:a,position:t,offset:o,range:s,label:i.name,insertText:i.name,sortText:i.sortText,kind:_.convertKind(i.kind),tags:r}}))}:void 0}async resolveCompletionItem(e,t){const i=e,s=i.uri,r=i.position,n=i.offset,a=await this._worker(s),o=await a.getCompletionEntryDetails(s.toString(),n,i.label);return o?{uri:s,position:r,label:o.name,kind:_.convertKind(o.kind),detail:m(o.displayParts),documentation:{value:_.createDocumentationString(o)}}:i}static convertKind(e){switch(e){case A.primitiveType:case A.keyword:return d.languages.CompletionItemKind.Keyword;case A.variable:case A.localVariable:return d.languages.CompletionItemKind.Variable;case A.memberVariable:case A.memberGetAccessor:case A.memberSetAccessor:return d.languages.CompletionItemKind.Field;case A.function:case A.memberFunction:case A.constructSignature:case A.callSignature:case A.indexSignature:return d.languages.CompletionItemKind.Function;case A.enum:return d.languages.CompletionItemKind.Enum;case A.module:return d.languages.CompletionItemKind.Module;case A.class:return d.languages.CompletionItemKind.Class;case A.interface:return d.languages.CompletionItemKind.Interface;case A.warning:return d.languages.CompletionItemKind.File}return d.languages.CompletionItemKind.Property}static createDocumentationString(e){let t=m(e.documentation);if(e.tags)for(const i of e.tags)t+=`\n\n${y(i)}`;return t}};function y(e){let t=`*@${e.name}*`;if("param"===e.name&&e.text){const[i,...s]=e.text;t+=`\`${i.text}\``,s.length>0&&(t+=` — ${s.map((e=>e.text)).join(" ")}`)}else Array.isArray(e.text)?t+=` — ${e.text.map((e=>e.text)).join(" ")}`:e.text&&(t+=` — ${e.text}`);return t}var w=class extends h{signatureHelpTriggerCharacters=["(",","];static _toSignatureHelpTriggerReason(e){switch(e.triggerKind){case d.languages.SignatureHelpTriggerKind.TriggerCharacter:return e.triggerCharacter?e.isRetrigger?{kind:"retrigger",triggerCharacter:e.triggerCharacter}:{kind:"characterTyped",triggerCharacter:e.triggerCharacter}:{kind:"invoked"};case d.languages.SignatureHelpTriggerKind.ContentChange:return e.isRetrigger?{kind:"retrigger"}:{kind:"invoked"};case d.languages.SignatureHelpTriggerKind.Invoke:default:return{kind:"invoked"}}}async provideSignatureHelp(e,t,i,s){const r=e.uri,n=e.getOffsetAt(t),a=await this._worker(r);if(e.isDisposed())return;const o=await a.getSignatureHelpItems(r.toString(),n,{triggerReason:w._toSignatureHelpTriggerReason(s)});if(!o||e.isDisposed())return;const l={activeSignature:o.selectedItemIndex,activeParameter:o.argumentIndex,signatures:[]};return o.items.forEach((e=>{const t={label:"",parameters:[]};t.documentation={value:m(e.documentation)},t.label+=m(e.prefixDisplayParts),e.parameters.forEach(((i,s,r)=>{const n=m(i.displayParts),a={label:n,documentation:{value:m(i.documentation)}};t.label+=n,t.parameters.push(a),s<r.length-1&&(t.label+=m(e.separatorDisplayParts))})),t.label+=m(e.suffixDisplayParts),l.signatures.push(t)})),{value:l,dispose(){}}}},S=class extends h{async provideHover(e,t,i){const s=e.uri,r=e.getOffsetAt(t),n=await this._worker(s);if(e.isDisposed())return;const a=await n.getQuickInfoAtPosition(s.toString(),r);if(!a||e.isDisposed())return;const o=m(a.documentation),l=a.tags?a.tags.map((e=>y(e))).join("  \n\n"):"",c=m(a.displayParts);return{range:this._textSpanToRange(e,a.textSpan),contents:[{value:"```typescript\n"+c+"\n```\n"},{value:o+(l?"\n\n"+l:"")}]}}},k=class extends h{async provideDocumentHighlights(e,t,i){const s=e.uri,r=e.getOffsetAt(t),n=await this._worker(s);if(e.isDisposed())return;const a=await n.getOccurrencesAtPosition(s.toString(),r);return a&&!e.isDisposed()?a.map((t=>({range:this._textSpanToRange(e,t.textSpan),kind:t.isWriteAccess?d.languages.DocumentHighlightKind.Write:d.languages.DocumentHighlightKind.Text}))):void 0}},x=class extends h{constructor(e,t){super(t),this._libFiles=e}async provideDefinition(e,t,i){const s=e.uri,r=e.getOffsetAt(t),n=await this._worker(s);if(e.isDisposed())return;const a=await n.getDefinitionAtPosition(s.toString(),r);if(!a||e.isDisposed())return;if(await this._libFiles.fetchLibFilesIfNecessary(a.map((e=>d.Uri.parse(e.fileName)))),e.isDisposed())return;const o=[];for(let e of a){const t=this._libFiles.getOrCreateModel(e.fileName);t&&o.push({uri:t.uri,range:this._textSpanToRange(t,e.textSpan)})}return o}},v=class extends h{constructor(e,t){super(t),this._libFiles=e}async provideReferences(e,t,i,s){const r=e.uri,n=e.getOffsetAt(t),a=await this._worker(r);if(e.isDisposed())return;const o=await a.getReferencesAtPosition(r.toString(),n);if(!o||e.isDisposed())return;if(await this._libFiles.fetchLibFilesIfNecessary(o.map((e=>d.Uri.parse(e.fileName)))),e.isDisposed())return;const l=[];for(let e of o){const t=this._libFiles.getOrCreateModel(e.fileName);t&&l.push({uri:t.uri,range:this._textSpanToRange(t,e.textSpan)})}return l}},C=class extends h{async provideDocumentSymbols(e,t){const i=e.uri,s=await this._worker(i);if(e.isDisposed())return;const r=await s.getNavigationBarItems(i.toString());if(!r||e.isDisposed())return;const n=(t,i,s)=>{let r={name:i.text,detail:"",kind:D[i.kind]||d.languages.SymbolKind.Variable,range:this._textSpanToRange(e,i.spans[0]),selectionRange:this._textSpanToRange(e,i.spans[0]),tags:[]};if(s&&(r.containerName=s),i.childItems&&i.childItems.length>0)for(let e of i.childItems)n(t,e,r.name);t.push(r)};let a=[];return r.forEach((e=>n(a,e))),a}},A=class{};c(A,"unknown",""),c(A,"keyword","keyword"),c(A,"script","script"),c(A,"module","module"),c(A,"class","class"),c(A,"interface","interface"),c(A,"type","type"),c(A,"enum","enum"),c(A,"variable","var"),c(A,"localVariable","local var"),c(A,"function","function"),c(A,"localFunction","local function"),c(A,"memberFunction","method"),c(A,"memberGetAccessor","getter"),c(A,"memberSetAccessor","setter"),c(A,"memberVariable","property"),c(A,"constructorImplementation","constructor"),c(A,"callSignature","call"),c(A,"indexSignature","index"),c(A,"constructSignature","construct"),c(A,"parameter","parameter"),c(A,"typeParameter","type parameter"),c(A,"primitiveType","primitive type"),c(A,"label","label"),c(A,"alias","alias"),c(A,"const","const"),c(A,"let","let"),c(A,"warning","warning");var D=Object.create(null);D[A.module]=d.languages.SymbolKind.Module,D[A.class]=d.languages.SymbolKind.Class,D[A.enum]=d.languages.SymbolKind.Enum,D[A.interface]=d.languages.SymbolKind.Interface,D[A.memberFunction]=d.languages.SymbolKind.Method,D[A.memberVariable]=d.languages.SymbolKind.Property,D[A.memberGetAccessor]=d.languages.SymbolKind.Property,D[A.memberSetAccessor]=d.languages.SymbolKind.Property,D[A.variable]=d.languages.SymbolKind.Variable,D[A.const]=d.languages.SymbolKind.Variable,D[A.localVariable]=d.languages.SymbolKind.Variable,D[A.variable]=d.languages.SymbolKind.Variable,D[A.function]=d.languages.SymbolKind.Function,D[A.localFunction]=d.languages.SymbolKind.Function;var F,I,L=class extends h{static _convertOptions(e){return{ConvertTabsToSpaces:e.insertSpaces,TabSize:e.tabSize,IndentSize:e.tabSize,IndentStyle:2,NewLineCharacter:"\n",InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1,PlaceOpenBraceOnNewLineForFunctions:!1}}_convertTextChanges(e,t){return{text:t.newText,range:this._textSpanToRange(e,t.span)}}},T=class extends L{async provideDocumentRangeFormattingEdits(e,t,i,s){const r=e.uri,n=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),a=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),o=await this._worker(r);if(e.isDisposed())return;const l=await o.getFormattingEditsForRange(r.toString(),n,a,L._convertOptions(i));return l&&!e.isDisposed()?l.map((t=>this._convertTextChanges(e,t))):void 0}},P=class extends L{get autoFormatTriggerCharacters(){return[";","}","\n"]}async provideOnTypeFormattingEdits(e,t,i,s,r){const n=e.uri,a=e.getOffsetAt(t),o=await this._worker(n);if(e.isDisposed())return;const l=await o.getFormattingEditsAfterKeystroke(n.toString(),a,i,L._convertOptions(s));return l&&!e.isDisposed()?l.map((t=>this._convertTextChanges(e,t))):void 0}},O=class extends L{async provideCodeActions(e,t,i,s){const r=e.uri,n=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),a=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),o=L._convertOptions(e.getOptions()),l=i.markers.filter((e=>e.code)).map((e=>e.code)).map(Number),c=await this._worker(r);if(e.isDisposed())return;const d=await c.getCodeFixesAtPosition(r.toString(),n,a,l,o);return!d||e.isDisposed()?{actions:[],dispose:()=>{}}:{actions:d.filter((e=>0===e.changes.filter((e=>e.isNewFile)).length)).map((t=>this._tsCodeFixActionToMonacoCodeAction(e,i,t))),dispose:()=>{}}}_tsCodeFixActionToMonacoCodeAction(e,t,i){const s=[];for(const t of i.changes)for(const i of t.textChanges)s.push({resource:e.uri,edit:{range:this._textSpanToRange(e,i.span),text:i.newText}});return{title:i.description,edit:{edits:s},diagnostics:t.markers,kind:"quickfix"}}},N=class extends h{constructor(e,t){super(t),this._libFiles=e}async provideRenameEdits(e,t,i,s){const r=e.uri,n=r.toString(),a=e.getOffsetAt(t),o=await this._worker(r);if(e.isDisposed())return;const l=await o.getRenameInfo(n,a,{allowRenameOfImportPath:!1});if(!1===l.canRename)return{edits:[],rejectReason:l.localizedErrorMessage};if(void 0!==l.fileToRename)throw new Error("Renaming files is not supported.");const c=await o.findRenameLocations(n,a,!1,!1,!1);if(!c||e.isDisposed())return;const d=[];for(const e of c){const t=this._libFiles.getOrCreateModel(e.fileName);if(!t)throw new Error(`Unknown file ${e.fileName}.`);d.push({resource:t.uri,edit:{range:this._textSpanToRange(t,e.textSpan),text:i}})}return{edits:d}}},K=class extends h{async provideInlayHints(e,t,i){const s=e.uri,r=s.toString(),n=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),a=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),o=await this._worker(s);return e.isDisposed()?null:{hints:(await o.provideInlayHints(r,n,a)).map((t=>({...t,label:t.text,position:e.getPositionAt(t.position),kind:this._convertHintKind(t.kind)}))),dispose:()=>{}}}_convertHintKind(e){return"Parameter"===e?d.languages.InlayHintKind.Parameter:d.languages.InlayHintKind.Type}};function M(e){I=V(e,"typescript")}function R(e){F=V(e,"javascript")}function E(){return new Promise(((e,t)=>{if(!F)return t("JavaScript not registered!");e(F)}))}function H(){return new Promise(((e,t)=>{if(!I)return t("TypeScript not registered!");e(I)}))}function V(e,t){const i=new u(t,e),s=(...e)=>i.getLanguageServiceWorker(...e),r=new b(s);return d.languages.registerCompletionItemProvider(t,new _(s)),d.languages.registerSignatureHelpProvider(t,new w(s)),d.languages.registerHoverProvider(t,new S(s)),d.languages.registerDocumentHighlightProvider(t,new k(s)),d.languages.registerDefinitionProvider(t,new x(r,s)),d.languages.registerReferenceProvider(t,new v(r,s)),d.languages.registerDocumentSymbolProvider(t,new C(s)),d.languages.registerDocumentRangeFormattingEditProvider(t,new T(s)),d.languages.registerOnTypeFormattingEditProvider(t,new P(s)),d.languages.registerCodeActionProvider(t,new O(s)),d.languages.registerRenameProvider(t,new N(r,s)),d.languages.registerInlayHintsProvider(t,new K(s)),new f(r,e,t,s),s}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDM0cvQyxFQUEyQjZNLFVBQVV5TSxxQ0FBcUNyWSxFQUFRLElBQUl5VSxFQUFvQjNTLElBQzFHL0MsRUFBMkI2TSxVQUFVME0sMkJBQTJCdFksRUFBUSxJQUFJNlUsRUFBa0IvUyxJQUM5Ri9DLEVBQTJCNk0sVUFBVTJNLHVCQUF1QnZZLEVBQVEsSUFBSWlXLEVBQWNwUSxFQUFVL0QsSUFDaEcvQyxFQUEyQjZNLFVBQVU0TSwyQkFBMkJ4WSxFQUFRLElBQUk4VyxFQUFrQmhWLElBQzlGLElBQUlnRSxFQUFtQkQsRUFBVTVGLEVBQVVELEVBQVE4QixHQUM1Q0EsQ0FDVCxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbG9ncy8uL25vZGVfbW9kdWxlcy9tb25hY28tZWRpdG9yL2VzbS92cy9sYW5ndWFnZS90eXBlc2NyaXB0L3RzTW9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBWZXJzaW9uOiAwLjMzLjAoNGIxYWJhZDQyN2U1OGRiZWRjMTIxNWQ5OWEwOTAyZmZjODg1ZmNkNClcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9tb25hY28tZWRpdG9yL2Jsb2IvbWFpbi9MSUNFTlNFLnR4dFxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcmVFeHBvcnQgPSAodGFyZ2V0LCBtb2R1bGUsIGNvcHlEZWZhdWx0LCBkZXNjKSA9PiB7XG4gIGlmIChtb2R1bGUgJiYgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgbW9kdWxlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMobW9kdWxlKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodGFyZ2V0LCBrZXkpICYmIChjb3B5RGVmYXVsdCB8fCBrZXkgIT09IFwiZGVmYXVsdFwiKSlcbiAgICAgICAgX19kZWZQcm9wKHRhcmdldCwga2V5LCB7IGdldDogKCkgPT4gbW9kdWxlW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MobW9kdWxlLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn07XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IHtcbiAgX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLy8gc3JjL2ZpbGxlcnMvbW9uYWNvLWVkaXRvci1jb3JlLnRzXG52YXIgbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMgPSB7fTtcbl9fcmVFeHBvcnQobW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMsIG1vbmFjb19lZGl0b3JfY29yZV9zdGFyKTtcbmltcG9ydCAqIGFzIG1vbmFjb19lZGl0b3JfY29yZV9zdGFyIGZyb20gXCIuLi8uLi9lZGl0b3IvZWRpdG9yLmFwaS5qc1wiO1xuXG4vLyBzcmMvbGFuZ3VhZ2UvdHlwZXNjcmlwdC93b3JrZXJNYW5hZ2VyLnRzXG52YXIgV29ya2VyTWFuYWdlciA9IGNsYXNzIHtcbiAgX21vZGVJZDtcbiAgX2RlZmF1bHRzO1xuICBfY29uZmlnQ2hhbmdlTGlzdGVuZXI7XG4gIF91cGRhdGVFeHRyYUxpYnNUb2tlbjtcbiAgX2V4dHJhTGlic0NoYW5nZUxpc3RlbmVyO1xuICBfd29ya2VyO1xuICBfY2xpZW50O1xuICBjb25zdHJ1Y3Rvcihtb2RlSWQsIGRlZmF1bHRzKSB7XG4gICAgdGhpcy5fbW9kZUlkID0gbW9kZUlkO1xuICAgIHRoaXMuX2RlZmF1bHRzID0gZGVmYXVsdHM7XG4gICAgdGhpcy5fd29ya2VyID0gbnVsbDtcbiAgICB0aGlzLl9jbGllbnQgPSBudWxsO1xuICAgIHRoaXMuX2NvbmZpZ0NoYW5nZUxpc3RlbmVyID0gdGhpcy5fZGVmYXVsdHMub25EaWRDaGFuZ2UoKCkgPT4gdGhpcy5fc3RvcFdvcmtlcigpKTtcbiAgICB0aGlzLl91cGRhdGVFeHRyYUxpYnNUb2tlbiA9IDA7XG4gICAgdGhpcy5fZXh0cmFMaWJzQ2hhbmdlTGlzdGVuZXIgPSB0aGlzLl9kZWZhdWx0cy5vbkRpZEV4dHJhTGlic0NoYW5nZSgoKSA9PiB0aGlzLl91cGRhdGVFeHRyYUxpYnMoKSk7XG4gIH1cbiAgX3N0b3BXb3JrZXIoKSB7XG4gICAgaWYgKHRoaXMuX3dvcmtlcikge1xuICAgICAgdGhpcy5fd29ya2VyLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuX3dvcmtlciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuX2NsaWVudCA9IG51bGw7XG4gIH1cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLl9jb25maWdDaGFuZ2VMaXN0ZW5lci5kaXNwb3NlKCk7XG4gICAgdGhpcy5fZXh0cmFMaWJzQ2hhbmdlTGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgIHRoaXMuX3N0b3BXb3JrZXIoKTtcbiAgfVxuICBhc3luYyBfdXBkYXRlRXh0cmFMaWJzKCkge1xuICAgIGlmICghdGhpcy5fd29ya2VyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG15VG9rZW4gPSArK3RoaXMuX3VwZGF0ZUV4dHJhTGlic1Rva2VuO1xuICAgIGNvbnN0IHByb3h5ID0gYXdhaXQgdGhpcy5fd29ya2VyLmdldFByb3h5KCk7XG4gICAgaWYgKHRoaXMuX3VwZGF0ZUV4dHJhTGlic1Rva2VuICE9PSBteVRva2VuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHByb3h5LnVwZGF0ZUV4dHJhTGlicyh0aGlzLl9kZWZhdWx0cy5nZXRFeHRyYUxpYnMoKSk7XG4gIH1cbiAgX2dldENsaWVudCgpIHtcbiAgICBpZiAoIXRoaXMuX2NsaWVudCkge1xuICAgICAgdGhpcy5fd29ya2VyID0gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuZWRpdG9yLmNyZWF0ZVdlYldvcmtlcih7XG4gICAgICAgIG1vZHVsZUlkOiBcInZzL2xhbmd1YWdlL3R5cGVzY3JpcHQvdHNXb3JrZXJcIixcbiAgICAgICAgbGFiZWw6IHRoaXMuX21vZGVJZCxcbiAgICAgICAga2VlcElkbGVNb2RlbHM6IHRydWUsXG4gICAgICAgIGNyZWF0ZURhdGE6IHtcbiAgICAgICAgICBjb21waWxlck9wdGlvbnM6IHRoaXMuX2RlZmF1bHRzLmdldENvbXBpbGVyT3B0aW9ucygpLFxuICAgICAgICAgIGV4dHJhTGliczogdGhpcy5fZGVmYXVsdHMuZ2V0RXh0cmFMaWJzKCksXG4gICAgICAgICAgY3VzdG9tV29ya2VyUGF0aDogdGhpcy5fZGVmYXVsdHMud29ya2VyT3B0aW9ucy5jdXN0b21Xb3JrZXJQYXRoLFxuICAgICAgICAgIGlubGF5SGludHNPcHRpb25zOiB0aGlzLl9kZWZhdWx0cy5pbmxheUhpbnRzT3B0aW9uc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxldCBwID0gdGhpcy5fd29ya2VyLmdldFByb3h5KCk7XG4gICAgICBpZiAodGhpcy5fZGVmYXVsdHMuZ2V0RWFnZXJNb2RlbFN5bmMoKSkge1xuICAgICAgICBwID0gcC50aGVuKCh3b3JrZXIpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5fd29ya2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd29ya2VyLndpdGhTeW5jZWRSZXNvdXJjZXMobW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuZWRpdG9yLmdldE1vZGVscygpLmZpbHRlcigobW9kZWwpID0+IG1vZGVsLmdldExhbmd1YWdlSWQoKSA9PT0gdGhpcy5fbW9kZUlkKS5tYXAoKG1vZGVsKSA9PiBtb2RlbC51cmkpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHdvcmtlcjtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9jbGllbnQgPSBwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2xpZW50O1xuICB9XG4gIGdldExhbmd1YWdlU2VydmljZVdvcmtlciguLi5yZXNvdXJjZXMpIHtcbiAgICBsZXQgX2NsaWVudDtcbiAgICByZXR1cm4gdGhpcy5fZ2V0Q2xpZW50KCkudGhlbigoY2xpZW50KSA9PiB7XG4gICAgICBfY2xpZW50ID0gY2xpZW50O1xuICAgIH0pLnRoZW4oKF8pID0+IHtcbiAgICAgIGlmICh0aGlzLl93b3JrZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dvcmtlci53aXRoU3luY2VkUmVzb3VyY2VzKHJlc291cmNlcyk7XG4gICAgICB9XG4gICAgfSkudGhlbigoXykgPT4gX2NsaWVudCk7XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5ndWFnZS90eXBlc2NyaXB0L2xhbmd1YWdlRmVhdHVyZXMudHNcbmltcG9ydCB7XG4gIHR5cGVzY3JpcHREZWZhdWx0c1xufSBmcm9tIFwiLi9tb25hY28uY29udHJpYnV0aW9uLmpzXCI7XG5cbi8vIHNyYy9sYW5ndWFnZS90eXBlc2NyaXB0L2xpYi9saWIuaW5kZXgudHNcbnZhciBsaWJGaWxlU2V0ID0ge307XG5saWJGaWxlU2V0W1wibGliLmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5kb20uZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmRvbS5pdGVyYWJsZS5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDE1LmNvbGxlY3Rpb24uZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxNS5jb3JlLmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lczIwMTUuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxNS5nZW5lcmF0b3IuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxNS5pdGVyYWJsZS5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDE1LnByb21pc2UuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxNS5wcm94eS5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDE1LnJlZmxlY3QuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxNS5zeW1ib2wuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxNS5zeW1ib2wud2VsbGtub3duLmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lczIwMTYuYXJyYXkuaW5jbHVkZS5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDE2LmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lczIwMTYuZnVsbC5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDE3LmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lczIwMTcuZnVsbC5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDE3LmludGwuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxNy5vYmplY3QuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxNy5zaGFyZWRtZW1vcnkuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxNy5zdHJpbmcuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxNy50eXBlZGFycmF5cy5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDE4LmFzeW5jZ2VuZXJhdG9yLmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lczIwMTguYXN5bmNpdGVyYWJsZS5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDE4LmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lczIwMTguZnVsbC5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDE4LmludGwuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxOC5wcm9taXNlLmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lczIwMTgucmVnZXhwLmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lczIwMTkuYXJyYXkuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxOS5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDE5LmZ1bGwuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxOS5vYmplY3QuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxOS5zdHJpbmcuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAxOS5zeW1ib2wuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAyMC5iaWdpbnQuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAyMC5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDIwLmZ1bGwuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAyMC5pbnRsLmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lczIwMjAucHJvbWlzZS5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDIwLnNoYXJlZG1lbW9yeS5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDIwLnN0cmluZy5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDIwLnN5bWJvbC53ZWxsa25vd24uZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAyMS5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDIxLmZ1bGwuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzMjAyMS5pbnRsLmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lczIwMjEucHJvbWlzZS5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDIxLnN0cmluZy5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXMyMDIxLndlYWtyZWYuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzNS5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXM2LmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lc25leHQuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzbmV4dC5mdWxsLmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5lc25leHQuaW50bC5kLnRzXCJdID0gdHJ1ZTtcbmxpYkZpbGVTZXRbXCJsaWIuZXNuZXh0LnByb21pc2UuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzbmV4dC5zdHJpbmcuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLmVzbmV4dC53ZWFrcmVmLmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi5zY3JpcHRob3N0LmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi53ZWJ3b3JrZXIuZC50c1wiXSA9IHRydWU7XG5saWJGaWxlU2V0W1wibGliLndlYndvcmtlci5pbXBvcnRzY3JpcHRzLmQudHNcIl0gPSB0cnVlO1xubGliRmlsZVNldFtcImxpYi53ZWJ3b3JrZXIuaXRlcmFibGUuZC50c1wiXSA9IHRydWU7XG5cbi8vIHNyYy9sYW5ndWFnZS90eXBlc2NyaXB0L2xhbmd1YWdlRmVhdHVyZXMudHNcbmZ1bmN0aW9uIGZsYXR0ZW5EaWFnbm9zdGljTWVzc2FnZVRleHQoZGlhZywgbmV3TGluZSwgaW5kZW50ID0gMCkge1xuICBpZiAodHlwZW9mIGRpYWcgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZGlhZztcbiAgfSBlbHNlIGlmIChkaWFnID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgaWYgKGluZGVudCkge1xuICAgIHJlc3VsdCArPSBuZXdMaW5lO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kZW50OyBpKyspIHtcbiAgICAgIHJlc3VsdCArPSBcIiAgXCI7XG4gICAgfVxuICB9XG4gIHJlc3VsdCArPSBkaWFnLm1lc3NhZ2VUZXh0O1xuICBpbmRlbnQrKztcbiAgaWYgKGRpYWcubmV4dCkge1xuICAgIGZvciAoY29uc3Qga2lkIG9mIGRpYWcubmV4dCkge1xuICAgICAgcmVzdWx0ICs9IGZsYXR0ZW5EaWFnbm9zdGljTWVzc2FnZVRleHQoa2lkLCBuZXdMaW5lLCBpbmRlbnQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZGlzcGxheVBhcnRzVG9TdHJpbmcoZGlzcGxheVBhcnRzKSB7XG4gIGlmIChkaXNwbGF5UGFydHMpIHtcbiAgICByZXR1cm4gZGlzcGxheVBhcnRzLm1hcCgoZGlzcGxheVBhcnQpID0+IGRpc3BsYXlQYXJ0LnRleHQpLmpvaW4oXCJcIik7XG4gIH1cbiAgcmV0dXJuIFwiXCI7XG59XG52YXIgQWRhcHRlciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoX3dvcmtlcikge1xuICAgIHRoaXMuX3dvcmtlciA9IF93b3JrZXI7XG4gIH1cbiAgX3RleHRTcGFuVG9SYW5nZShtb2RlbCwgc3Bhbikge1xuICAgIGxldCBwMSA9IG1vZGVsLmdldFBvc2l0aW9uQXQoc3Bhbi5zdGFydCk7XG4gICAgbGV0IHAyID0gbW9kZWwuZ2V0UG9zaXRpb25BdChzcGFuLnN0YXJ0ICsgc3Bhbi5sZW5ndGgpO1xuICAgIGxldCB7IGxpbmVOdW1iZXI6IHN0YXJ0TGluZU51bWJlciwgY29sdW1uOiBzdGFydENvbHVtbiB9ID0gcDE7XG4gICAgbGV0IHsgbGluZU51bWJlcjogZW5kTGluZU51bWJlciwgY29sdW1uOiBlbmRDb2x1bW4gfSA9IHAyO1xuICAgIHJldHVybiB7IHN0YXJ0TGluZU51bWJlciwgc3RhcnRDb2x1bW4sIGVuZExpbmVOdW1iZXIsIGVuZENvbHVtbiB9O1xuICB9XG59O1xudmFyIExpYkZpbGVzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihfd29ya2VyKSB7XG4gICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcbiAgICB0aGlzLl9saWJGaWxlcyA9IHt9O1xuICAgIHRoaXMuX2hhc0ZldGNoZWRMaWJGaWxlcyA9IGZhbHNlO1xuICAgIHRoaXMuX2ZldGNoTGliRmlsZXNQcm9taXNlID0gbnVsbDtcbiAgfVxuICBfbGliRmlsZXM7XG4gIF9oYXNGZXRjaGVkTGliRmlsZXM7XG4gIF9mZXRjaExpYkZpbGVzUHJvbWlzZTtcbiAgaXNMaWJGaWxlKHVyaSkge1xuICAgIGlmICghdXJpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh1cmkucGF0aC5pbmRleE9mKFwiL2xpYi5cIikgPT09IDApIHtcbiAgICAgIHJldHVybiAhIWxpYkZpbGVTZXRbdXJpLnBhdGguc2xpY2UoMSldO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZ2V0T3JDcmVhdGVNb2RlbChmaWxlTmFtZSkge1xuICAgIGNvbnN0IHVyaSA9IG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLlVyaS5wYXJzZShmaWxlTmFtZSk7XG4gICAgY29uc3QgbW9kZWwgPSBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5lZGl0b3IuZ2V0TW9kZWwodXJpKTtcbiAgICBpZiAobW9kZWwpIHtcbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNMaWJGaWxlKHVyaSkgJiYgdGhpcy5faGFzRmV0Y2hlZExpYkZpbGVzKSB7XG4gICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuZWRpdG9yLmNyZWF0ZU1vZGVsKHRoaXMuX2xpYkZpbGVzW3VyaS5wYXRoLnNsaWNlKDEpXSwgXCJ0eXBlc2NyaXB0XCIsIHVyaSk7XG4gICAgfVxuICAgIGNvbnN0IG1hdGNoZWRMaWJGaWxlID0gdHlwZXNjcmlwdERlZmF1bHRzLmdldEV4dHJhTGlicygpW2ZpbGVOYW1lXTtcbiAgICBpZiAobWF0Y2hlZExpYkZpbGUpIHtcbiAgICAgIHJldHVybiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5lZGl0b3IuY3JlYXRlTW9kZWwobWF0Y2hlZExpYkZpbGUuY29udGVudCwgXCJ0eXBlc2NyaXB0XCIsIHVyaSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIF9jb250YWluc0xpYkZpbGUodXJpcykge1xuICAgIGZvciAobGV0IHVyaSBvZiB1cmlzKSB7XG4gICAgICBpZiAodGhpcy5pc0xpYkZpbGUodXJpKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGFzeW5jIGZldGNoTGliRmlsZXNJZk5lY2Vzc2FyeSh1cmlzKSB7XG4gICAgaWYgKCF0aGlzLl9jb250YWluc0xpYkZpbGUodXJpcykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5fZmV0Y2hMaWJGaWxlcygpO1xuICB9XG4gIF9mZXRjaExpYkZpbGVzKCkge1xuICAgIGlmICghdGhpcy5fZmV0Y2hMaWJGaWxlc1Byb21pc2UpIHtcbiAgICAgIHRoaXMuX2ZldGNoTGliRmlsZXNQcm9taXNlID0gdGhpcy5fd29ya2VyKCkudGhlbigodykgPT4gdy5nZXRMaWJGaWxlcygpKS50aGVuKChsaWJGaWxlcykgPT4ge1xuICAgICAgICB0aGlzLl9oYXNGZXRjaGVkTGliRmlsZXMgPSB0cnVlO1xuICAgICAgICB0aGlzLl9saWJGaWxlcyA9IGxpYkZpbGVzO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9mZXRjaExpYkZpbGVzUHJvbWlzZTtcbiAgfVxufTtcbnZhciBEaWFnbm9zdGljc0FkYXB0ZXIgPSBjbGFzcyBleHRlbmRzIEFkYXB0ZXIge1xuICBjb25zdHJ1Y3RvcihfbGliRmlsZXMsIF9kZWZhdWx0cywgX3NlbGVjdG9yLCB3b3JrZXIpIHtcbiAgICBzdXBlcih3b3JrZXIpO1xuICAgIHRoaXMuX2xpYkZpbGVzID0gX2xpYkZpbGVzO1xuICAgIHRoaXMuX2RlZmF1bHRzID0gX2RlZmF1bHRzO1xuICAgIHRoaXMuX3NlbGVjdG9yID0gX3NlbGVjdG9yO1xuICAgIGNvbnN0IG9uTW9kZWxBZGQgPSAobW9kZWwpID0+IHtcbiAgICAgIGlmIChtb2RlbC5nZXRMYW5ndWFnZUlkKCkgIT09IF9zZWxlY3Rvcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBtYXliZVZhbGlkYXRlID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IG9ubHlWaXNpYmxlIH0gPSB0aGlzLl9kZWZhdWx0cy5nZXREaWFnbm9zdGljc09wdGlvbnMoKTtcbiAgICAgICAgaWYgKG9ubHlWaXNpYmxlKSB7XG4gICAgICAgICAgaWYgKG1vZGVsLmlzQXR0YWNoZWRUb0VkaXRvcigpKSB7XG4gICAgICAgICAgICB0aGlzLl9kb1ZhbGlkYXRlKG1vZGVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZG9WYWxpZGF0ZShtb2RlbCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBsZXQgaGFuZGxlO1xuICAgICAgY29uc3QgY2hhbmdlU3Vic2NyaXB0aW9uID0gbW9kZWwub25EaWRDaGFuZ2VDb250ZW50KCgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7XG4gICAgICAgIGhhbmRsZSA9IHdpbmRvdy5zZXRUaW1lb3V0KG1heWJlVmFsaWRhdGUsIDUwMCk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHZpc2libGVTdWJzY3JpcHRpb24gPSBtb2RlbC5vbkRpZENoYW5nZUF0dGFjaGVkKCgpID0+IHtcbiAgICAgICAgY29uc3QgeyBvbmx5VmlzaWJsZSB9ID0gdGhpcy5fZGVmYXVsdHMuZ2V0RGlhZ25vc3RpY3NPcHRpb25zKCk7XG4gICAgICAgIGlmIChvbmx5VmlzaWJsZSkge1xuICAgICAgICAgIGlmIChtb2RlbC5pc0F0dGFjaGVkVG9FZGl0b3IoKSkge1xuICAgICAgICAgICAgbWF5YmVWYWxpZGF0ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5lZGl0b3Iuc2V0TW9kZWxNYXJrZXJzKG1vZGVsLCB0aGlzLl9zZWxlY3RvciwgW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLl9saXN0ZW5lclttb2RlbC51cmkudG9TdHJpbmcoKV0gPSB7XG4gICAgICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgICAgY2hhbmdlU3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgICB2aXNpYmxlU3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIG1heWJlVmFsaWRhdGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IG9uTW9kZWxSZW1vdmVkID0gKG1vZGVsKSA9PiB7XG4gICAgICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5lZGl0b3Iuc2V0TW9kZWxNYXJrZXJzKG1vZGVsLCB0aGlzLl9zZWxlY3RvciwgW10pO1xuICAgICAgY29uc3Qga2V5ID0gbW9kZWwudXJpLnRvU3RyaW5nKCk7XG4gICAgICBpZiAodGhpcy5fbGlzdGVuZXJba2V5XSkge1xuICAgICAgICB0aGlzLl9saXN0ZW5lcltrZXldLmRpc3Bvc2UoKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2xpc3RlbmVyW2tleV07XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmVkaXRvci5vbkRpZENyZWF0ZU1vZGVsKChtb2RlbCkgPT4gb25Nb2RlbEFkZChtb2RlbCkpKTtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmVkaXRvci5vbldpbGxEaXNwb3NlTW9kZWwob25Nb2RlbFJlbW92ZWQpKTtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmVkaXRvci5vbkRpZENoYW5nZU1vZGVsTGFuZ3VhZ2UoKGV2ZW50KSA9PiB7XG4gICAgICBvbk1vZGVsUmVtb3ZlZChldmVudC5tb2RlbCk7XG4gICAgICBvbk1vZGVsQWRkKGV2ZW50Lm1vZGVsKTtcbiAgICB9KSk7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaCh7XG4gICAgICBkaXNwb3NlKCkge1xuICAgICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmVkaXRvci5nZXRNb2RlbHMoKSkge1xuICAgICAgICAgIG9uTW9kZWxSZW1vdmVkKG1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IHJlY29tcHV0ZURpYWdvc3RpY3MgPSAoKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmVkaXRvci5nZXRNb2RlbHMoKSkge1xuICAgICAgICBvbk1vZGVsUmVtb3ZlZChtb2RlbCk7XG4gICAgICAgIG9uTW9kZWxBZGQobW9kZWwpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaCh0aGlzLl9kZWZhdWx0cy5vbkRpZENoYW5nZShyZWNvbXB1dGVEaWFnb3N0aWNzKSk7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaCh0aGlzLl9kZWZhdWx0cy5vbkRpZEV4dHJhTGlic0NoYW5nZShyZWNvbXB1dGVEaWFnb3N0aWNzKSk7XG4gICAgbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuZWRpdG9yLmdldE1vZGVscygpLmZvckVhY2goKG1vZGVsKSA9PiBvbk1vZGVsQWRkKG1vZGVsKSk7XG4gIH1cbiAgX2Rpc3Bvc2FibGVzID0gW107XG4gIF9saXN0ZW5lciA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBkaXNwb3NlKCkge1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLmZvckVhY2goKGQpID0+IGQgJiYgZC5kaXNwb3NlKCkpO1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzID0gW107XG4gIH1cbiAgYXN5bmMgX2RvVmFsaWRhdGUobW9kZWwpIHtcbiAgICBjb25zdCB3b3JrZXIgPSBhd2FpdCB0aGlzLl93b3JrZXIobW9kZWwudXJpKTtcbiAgICBpZiAobW9kZWwuaXNEaXNwb3NlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgY29uc3QgeyBub1N5bnRheFZhbGlkYXRpb24sIG5vU2VtYW50aWNWYWxpZGF0aW9uLCBub1N1Z2dlc3Rpb25EaWFnbm9zdGljcyB9ID0gdGhpcy5fZGVmYXVsdHMuZ2V0RGlhZ25vc3RpY3NPcHRpb25zKCk7XG4gICAgaWYgKCFub1N5bnRheFZhbGlkYXRpb24pIHtcbiAgICAgIHByb21pc2VzLnB1c2god29ya2VyLmdldFN5bnRhY3RpY0RpYWdub3N0aWNzKG1vZGVsLnVyaS50b1N0cmluZygpKSk7XG4gICAgfVxuICAgIGlmICghbm9TZW1hbnRpY1ZhbGlkYXRpb24pIHtcbiAgICAgIHByb21pc2VzLnB1c2god29ya2VyLmdldFNlbWFudGljRGlhZ25vc3RpY3MobW9kZWwudXJpLnRvU3RyaW5nKCkpKTtcbiAgICB9XG4gICAgaWYgKCFub1N1Z2dlc3Rpb25EaWFnbm9zdGljcykge1xuICAgICAgcHJvbWlzZXMucHVzaCh3b3JrZXIuZ2V0U3VnZ2VzdGlvbkRpYWdub3N0aWNzKG1vZGVsLnVyaS50b1N0cmluZygpKSk7XG4gICAgfVxuICAgIGNvbnN0IGFsbERpYWdub3N0aWNzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIGlmICghYWxsRGlhZ25vc3RpY3MgfHwgbW9kZWwuaXNEaXNwb3NlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRpYWdub3N0aWNzID0gYWxsRGlhZ25vc3RpY3MucmVkdWNlKChwLCBjKSA9PiBjLmNvbmNhdChwKSwgW10pLmZpbHRlcigoZCkgPT4gKHRoaXMuX2RlZmF1bHRzLmdldERpYWdub3N0aWNzT3B0aW9ucygpLmRpYWdub3N0aWNDb2Rlc1RvSWdub3JlIHx8IFtdKS5pbmRleE9mKGQuY29kZSkgPT09IC0xKTtcbiAgICBjb25zdCByZWxhdGVkVXJpcyA9IGRpYWdub3N0aWNzLm1hcCgoZCkgPT4gZC5yZWxhdGVkSW5mb3JtYXRpb24gfHwgW10pLnJlZHVjZSgocCwgYykgPT4gYy5jb25jYXQocCksIFtdKS5tYXAoKHJlbGF0ZWRJbmZvcm1hdGlvbikgPT4gcmVsYXRlZEluZm9ybWF0aW9uLmZpbGUgPyBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5VcmkucGFyc2UocmVsYXRlZEluZm9ybWF0aW9uLmZpbGUuZmlsZU5hbWUpIDogbnVsbCk7XG4gICAgYXdhaXQgdGhpcy5fbGliRmlsZXMuZmV0Y2hMaWJGaWxlc0lmTmVjZXNzYXJ5KHJlbGF0ZWRVcmlzKTtcbiAgICBpZiAobW9kZWwuaXNEaXNwb3NlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmVkaXRvci5zZXRNb2RlbE1hcmtlcnMobW9kZWwsIHRoaXMuX3NlbGVjdG9yLCBkaWFnbm9zdGljcy5tYXAoKGQpID0+IHRoaXMuX2NvbnZlcnREaWFnbm9zdGljcyhtb2RlbCwgZCkpKTtcbiAgfVxuICBfY29udmVydERpYWdub3N0aWNzKG1vZGVsLCBkaWFnKSB7XG4gICAgY29uc3QgZGlhZ1N0YXJ0ID0gZGlhZy5zdGFydCB8fCAwO1xuICAgIGNvbnN0IGRpYWdMZW5ndGggPSBkaWFnLmxlbmd0aCB8fCAxO1xuICAgIGNvbnN0IHsgbGluZU51bWJlcjogc3RhcnRMaW5lTnVtYmVyLCBjb2x1bW46IHN0YXJ0Q29sdW1uIH0gPSBtb2RlbC5nZXRQb3NpdGlvbkF0KGRpYWdTdGFydCk7XG4gICAgY29uc3QgeyBsaW5lTnVtYmVyOiBlbmRMaW5lTnVtYmVyLCBjb2x1bW46IGVuZENvbHVtbiB9ID0gbW9kZWwuZ2V0UG9zaXRpb25BdChkaWFnU3RhcnQgKyBkaWFnTGVuZ3RoKTtcbiAgICBjb25zdCB0YWdzID0gW107XG4gICAgaWYgKGRpYWcucmVwb3J0c1VubmVjZXNzYXJ5KSB7XG4gICAgICB0YWdzLnB1c2gobW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuTWFya2VyVGFnLlVubmVjZXNzYXJ5KTtcbiAgICB9XG4gICAgaWYgKGRpYWcucmVwb3J0c0RlcHJlY2F0ZWQpIHtcbiAgICAgIHRhZ3MucHVzaChtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5NYXJrZXJUYWcuRGVwcmVjYXRlZCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzZXZlcml0eTogdGhpcy5fdHNEaWFnbm9zdGljQ2F0ZWdvcnlUb01hcmtlclNldmVyaXR5KGRpYWcuY2F0ZWdvcnkpLFxuICAgICAgc3RhcnRMaW5lTnVtYmVyLFxuICAgICAgc3RhcnRDb2x1bW4sXG4gICAgICBlbmRMaW5lTnVtYmVyLFxuICAgICAgZW5kQ29sdW1uLFxuICAgICAgbWVzc2FnZTogZmxhdHRlbkRpYWdub3N0aWNNZXNzYWdlVGV4dChkaWFnLm1lc3NhZ2VUZXh0LCBcIlxcblwiKSxcbiAgICAgIGNvZGU6IGRpYWcuY29kZS50b1N0cmluZygpLFxuICAgICAgdGFncyxcbiAgICAgIHJlbGF0ZWRJbmZvcm1hdGlvbjogdGhpcy5fY29udmVydFJlbGF0ZWRJbmZvcm1hdGlvbihtb2RlbCwgZGlhZy5yZWxhdGVkSW5mb3JtYXRpb24pXG4gICAgfTtcbiAgfVxuICBfY29udmVydFJlbGF0ZWRJbmZvcm1hdGlvbihtb2RlbCwgcmVsYXRlZEluZm9ybWF0aW9uKSB7XG4gICAgaWYgKCFyZWxhdGVkSW5mb3JtYXRpb24pIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgcmVsYXRlZEluZm9ybWF0aW9uLmZvckVhY2goKGluZm8pID0+IHtcbiAgICAgIGxldCByZWxhdGVkUmVzb3VyY2UgPSBtb2RlbDtcbiAgICAgIGlmIChpbmZvLmZpbGUpIHtcbiAgICAgICAgcmVsYXRlZFJlc291cmNlID0gdGhpcy5fbGliRmlsZXMuZ2V0T3JDcmVhdGVNb2RlbChpbmZvLmZpbGUuZmlsZU5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKCFyZWxhdGVkUmVzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaW5mb1N0YXJ0ID0gaW5mby5zdGFydCB8fCAwO1xuICAgICAgY29uc3QgaW5mb0xlbmd0aCA9IGluZm8ubGVuZ3RoIHx8IDE7XG4gICAgICBjb25zdCB7IGxpbmVOdW1iZXI6IHN0YXJ0TGluZU51bWJlciwgY29sdW1uOiBzdGFydENvbHVtbiB9ID0gcmVsYXRlZFJlc291cmNlLmdldFBvc2l0aW9uQXQoaW5mb1N0YXJ0KTtcbiAgICAgIGNvbnN0IHsgbGluZU51bWJlcjogZW5kTGluZU51bWJlciwgY29sdW1uOiBlbmRDb2x1bW4gfSA9IHJlbGF0ZWRSZXNvdXJjZS5nZXRQb3NpdGlvbkF0KGluZm9TdGFydCArIGluZm9MZW5ndGgpO1xuICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICByZXNvdXJjZTogcmVsYXRlZFJlc291cmNlLnVyaSxcbiAgICAgICAgc3RhcnRMaW5lTnVtYmVyLFxuICAgICAgICBzdGFydENvbHVtbixcbiAgICAgICAgZW5kTGluZU51bWJlcixcbiAgICAgICAgZW5kQ29sdW1uLFxuICAgICAgICBtZXNzYWdlOiBmbGF0dGVuRGlhZ25vc3RpY01lc3NhZ2VUZXh0KGluZm8ubWVzc2FnZVRleHQsIFwiXFxuXCIpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIF90c0RpYWdub3N0aWNDYXRlZ29yeVRvTWFya2VyU2V2ZXJpdHkoY2F0ZWdvcnkpIHtcbiAgICBzd2l0Y2ggKGNhdGVnb3J5KSB7XG4gICAgICBjYXNlIDEgLyogRXJyb3IgKi86XG4gICAgICAgIHJldHVybiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5NYXJrZXJTZXZlcml0eS5FcnJvcjtcbiAgICAgIGNhc2UgMyAvKiBNZXNzYWdlICovOlxuICAgICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuTWFya2VyU2V2ZXJpdHkuSW5mbztcbiAgICAgIGNhc2UgMCAvKiBXYXJuaW5nICovOlxuICAgICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuTWFya2VyU2V2ZXJpdHkuV2FybmluZztcbiAgICAgIGNhc2UgMiAvKiBTdWdnZXN0aW9uICovOlxuICAgICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuTWFya2VyU2V2ZXJpdHkuSGludDtcbiAgICB9XG4gICAgcmV0dXJuIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLk1hcmtlclNldmVyaXR5LkluZm87XG4gIH1cbn07XG52YXIgU3VnZ2VzdEFkYXB0ZXIgPSBjbGFzcyBleHRlbmRzIEFkYXB0ZXIge1xuICBnZXQgdHJpZ2dlckNoYXJhY3RlcnMoKSB7XG4gICAgcmV0dXJuIFtcIi5cIl07XG4gIH1cbiAgYXN5bmMgcHJvdmlkZUNvbXBsZXRpb25JdGVtcyhtb2RlbCwgcG9zaXRpb24sIF9jb250ZXh0LCB0b2tlbikge1xuICAgIGNvbnN0IHdvcmRJbmZvID0gbW9kZWwuZ2V0V29yZFVudGlsUG9zaXRpb24ocG9zaXRpb24pO1xuICAgIGNvbnN0IHdvcmRSYW5nZSA9IG5ldyBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5SYW5nZShwb3NpdGlvbi5saW5lTnVtYmVyLCB3b3JkSW5mby5zdGFydENvbHVtbiwgcG9zaXRpb24ubGluZU51bWJlciwgd29yZEluZm8uZW5kQ29sdW1uKTtcbiAgICBjb25zdCByZXNvdXJjZSA9IG1vZGVsLnVyaTtcbiAgICBjb25zdCBvZmZzZXQgPSBtb2RlbC5nZXRPZmZzZXRBdChwb3NpdGlvbik7XG4gICAgY29uc3Qgd29ya2VyID0gYXdhaXQgdGhpcy5fd29ya2VyKHJlc291cmNlKTtcbiAgICBpZiAobW9kZWwuaXNEaXNwb3NlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluZm8gPSBhd2FpdCB3b3JrZXIuZ2V0Q29tcGxldGlvbnNBdFBvc2l0aW9uKHJlc291cmNlLnRvU3RyaW5nKCksIG9mZnNldCk7XG4gICAgaWYgKCFpbmZvIHx8IG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IGluZm8uZW50cmllcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICBsZXQgcmFuZ2UgPSB3b3JkUmFuZ2U7XG4gICAgICBpZiAoZW50cnkucmVwbGFjZW1lbnRTcGFuKSB7XG4gICAgICAgIGNvbnN0IHAxID0gbW9kZWwuZ2V0UG9zaXRpb25BdChlbnRyeS5yZXBsYWNlbWVudFNwYW4uc3RhcnQpO1xuICAgICAgICBjb25zdCBwMiA9IG1vZGVsLmdldFBvc2l0aW9uQXQoZW50cnkucmVwbGFjZW1lbnRTcGFuLnN0YXJ0ICsgZW50cnkucmVwbGFjZW1lbnRTcGFuLmxlbmd0aCk7XG4gICAgICAgIHJhbmdlID0gbmV3IG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLlJhbmdlKHAxLmxpbmVOdW1iZXIsIHAxLmNvbHVtbiwgcDIubGluZU51bWJlciwgcDIuY29sdW1uKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhZ3MgPSBbXTtcbiAgICAgIGlmIChlbnRyeS5raW5kTW9kaWZpZXJzPy5pbmRleE9mKFwiZGVwcmVjYXRlZFwiKSAhPT0gLTEpIHtcbiAgICAgICAgdGFncy5wdXNoKG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbVRhZy5EZXByZWNhdGVkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVyaTogcmVzb3VyY2UsXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgICBvZmZzZXQsXG4gICAgICAgIHJhbmdlLFxuICAgICAgICBsYWJlbDogZW50cnkubmFtZSxcbiAgICAgICAgaW5zZXJ0VGV4dDogZW50cnkubmFtZSxcbiAgICAgICAgc29ydFRleHQ6IGVudHJ5LnNvcnRUZXh0LFxuICAgICAgICBraW5kOiBTdWdnZXN0QWRhcHRlci5jb252ZXJ0S2luZChlbnRyeS5raW5kKSxcbiAgICAgICAgdGFnc1xuICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VnZ2VzdGlvbnNcbiAgICB9O1xuICB9XG4gIGFzeW5jIHJlc29sdmVDb21wbGV0aW9uSXRlbShpdGVtLCB0b2tlbikge1xuICAgIGNvbnN0IG15SXRlbSA9IGl0ZW07XG4gICAgY29uc3QgcmVzb3VyY2UgPSBteUl0ZW0udXJpO1xuICAgIGNvbnN0IHBvc2l0aW9uID0gbXlJdGVtLnBvc2l0aW9uO1xuICAgIGNvbnN0IG9mZnNldCA9IG15SXRlbS5vZmZzZXQ7XG4gICAgY29uc3Qgd29ya2VyID0gYXdhaXQgdGhpcy5fd29ya2VyKHJlc291cmNlKTtcbiAgICBjb25zdCBkZXRhaWxzID0gYXdhaXQgd29ya2VyLmdldENvbXBsZXRpb25FbnRyeURldGFpbHMocmVzb3VyY2UudG9TdHJpbmcoKSwgb2Zmc2V0LCBteUl0ZW0ubGFiZWwpO1xuICAgIGlmICghZGV0YWlscykge1xuICAgICAgcmV0dXJuIG15SXRlbTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHVyaTogcmVzb3VyY2UsXG4gICAgICBwb3NpdGlvbixcbiAgICAgIGxhYmVsOiBkZXRhaWxzLm5hbWUsXG4gICAgICBraW5kOiBTdWdnZXN0QWRhcHRlci5jb252ZXJ0S2luZChkZXRhaWxzLmtpbmQpLFxuICAgICAgZGV0YWlsOiBkaXNwbGF5UGFydHNUb1N0cmluZyhkZXRhaWxzLmRpc3BsYXlQYXJ0cyksXG4gICAgICBkb2N1bWVudGF0aW9uOiB7XG4gICAgICAgIHZhbHVlOiBTdWdnZXN0QWRhcHRlci5jcmVhdGVEb2N1bWVudGF0aW9uU3RyaW5nKGRldGFpbHMpXG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBzdGF0aWMgY29udmVydEtpbmQoa2luZCkge1xuICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgY2FzZSBLaW5kLnByaW1pdGl2ZVR5cGU6XG4gICAgICBjYXNlIEtpbmQua2V5d29yZDpcbiAgICAgICAgcmV0dXJuIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUtpbmQuS2V5d29yZDtcbiAgICAgIGNhc2UgS2luZC52YXJpYWJsZTpcbiAgICAgIGNhc2UgS2luZC5sb2NhbFZhcmlhYmxlOlxuICAgICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLkNvbXBsZXRpb25JdGVtS2luZC5WYXJpYWJsZTtcbiAgICAgIGNhc2UgS2luZC5tZW1iZXJWYXJpYWJsZTpcbiAgICAgIGNhc2UgS2luZC5tZW1iZXJHZXRBY2Nlc3NvcjpcbiAgICAgIGNhc2UgS2luZC5tZW1iZXJTZXRBY2Nlc3NvcjpcbiAgICAgICAgcmV0dXJuIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUtpbmQuRmllbGQ7XG4gICAgICBjYXNlIEtpbmQuZnVuY3Rpb246XG4gICAgICBjYXNlIEtpbmQubWVtYmVyRnVuY3Rpb246XG4gICAgICBjYXNlIEtpbmQuY29uc3RydWN0U2lnbmF0dXJlOlxuICAgICAgY2FzZSBLaW5kLmNhbGxTaWduYXR1cmU6XG4gICAgICBjYXNlIEtpbmQuaW5kZXhTaWduYXR1cmU6XG4gICAgICAgIHJldHVybiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kLkZ1bmN0aW9uO1xuICAgICAgY2FzZSBLaW5kLmVudW06XG4gICAgICAgIHJldHVybiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kLkVudW07XG4gICAgICBjYXNlIEtpbmQubW9kdWxlOlxuICAgICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLkNvbXBsZXRpb25JdGVtS2luZC5Nb2R1bGU7XG4gICAgICBjYXNlIEtpbmQuY2xhc3M6XG4gICAgICAgIHJldHVybiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kLkNsYXNzO1xuICAgICAgY2FzZSBLaW5kLmludGVyZmFjZTpcbiAgICAgICAgcmV0dXJuIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUtpbmQuSW50ZXJmYWNlO1xuICAgICAgY2FzZSBLaW5kLndhcm5pbmc6XG4gICAgICAgIHJldHVybiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kLkZpbGU7XG4gICAgfVxuICAgIHJldHVybiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kLlByb3BlcnR5O1xuICB9XG4gIHN0YXRpYyBjcmVhdGVEb2N1bWVudGF0aW9uU3RyaW5nKGRldGFpbHMpIHtcbiAgICBsZXQgZG9jdW1lbnRhdGlvblN0cmluZyA9IGRpc3BsYXlQYXJ0c1RvU3RyaW5nKGRldGFpbHMuZG9jdW1lbnRhdGlvbik7XG4gICAgaWYgKGRldGFpbHMudGFncykge1xuICAgICAgZm9yIChjb25zdCB0YWcgb2YgZGV0YWlscy50YWdzKSB7XG4gICAgICAgIGRvY3VtZW50YXRpb25TdHJpbmcgKz0gYFxuXG4ke3RhZ1RvU3RyaW5nKHRhZyl9YDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRvY3VtZW50YXRpb25TdHJpbmc7XG4gIH1cbn07XG5mdW5jdGlvbiB0YWdUb1N0cmluZyh0YWcpIHtcbiAgbGV0IHRhZ0xhYmVsID0gYCpAJHt0YWcubmFtZX0qYDtcbiAgaWYgKHRhZy5uYW1lID09PSBcInBhcmFtXCIgJiYgdGFnLnRleHQpIHtcbiAgICBjb25zdCBbcGFyYW1OYW1lLCAuLi5yZXN0XSA9IHRhZy50ZXh0O1xuICAgIHRhZ0xhYmVsICs9IGBcXGAke3BhcmFtTmFtZS50ZXh0fVxcYGA7XG4gICAgaWYgKHJlc3QubGVuZ3RoID4gMClcbiAgICAgIHRhZ0xhYmVsICs9IGAgXFx1MjAxNCAke3Jlc3QubWFwKChyKSA9PiByLnRleHQpLmpvaW4oXCIgXCIpfWA7XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YWcudGV4dCkpIHtcbiAgICB0YWdMYWJlbCArPSBgIFxcdTIwMTQgJHt0YWcudGV4dC5tYXAoKHIpID0+IHIudGV4dCkuam9pbihcIiBcIil9YDtcbiAgfSBlbHNlIGlmICh0YWcudGV4dCkge1xuICAgIHRhZ0xhYmVsICs9IGAgXFx1MjAxNCAke3RhZy50ZXh0fWA7XG4gIH1cbiAgcmV0dXJuIHRhZ0xhYmVsO1xufVxudmFyIFNpZ25hdHVyZUhlbHBBZGFwdGVyID0gY2xhc3MgZXh0ZW5kcyBBZGFwdGVyIHtcbiAgc2lnbmF0dXJlSGVscFRyaWdnZXJDaGFyYWN0ZXJzID0gW1wiKFwiLCBcIixcIl07XG4gIHN0YXRpYyBfdG9TaWduYXR1cmVIZWxwVHJpZ2dlclJlYXNvbihjb250ZXh0KSB7XG4gICAgc3dpdGNoIChjb250ZXh0LnRyaWdnZXJLaW5kKSB7XG4gICAgICBjYXNlIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5TaWduYXR1cmVIZWxwVHJpZ2dlcktpbmQuVHJpZ2dlckNoYXJhY3RlcjpcbiAgICAgICAgaWYgKGNvbnRleHQudHJpZ2dlckNoYXJhY3Rlcikge1xuICAgICAgICAgIGlmIChjb250ZXh0LmlzUmV0cmlnZ2VyKSB7XG4gICAgICAgICAgICByZXR1cm4geyBraW5kOiBcInJldHJpZ2dlclwiLCB0cmlnZ2VyQ2hhcmFjdGVyOiBjb250ZXh0LnRyaWdnZXJDaGFyYWN0ZXIgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsga2luZDogXCJjaGFyYWN0ZXJUeXBlZFwiLCB0cmlnZ2VyQ2hhcmFjdGVyOiBjb250ZXh0LnRyaWdnZXJDaGFyYWN0ZXIgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHsga2luZDogXCJpbnZva2VkXCIgfTtcbiAgICAgICAgfVxuICAgICAgY2FzZSBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuU2lnbmF0dXJlSGVscFRyaWdnZXJLaW5kLkNvbnRlbnRDaGFuZ2U6XG4gICAgICAgIHJldHVybiBjb250ZXh0LmlzUmV0cmlnZ2VyID8geyBraW5kOiBcInJldHJpZ2dlclwiIH0gOiB7IGtpbmQ6IFwiaW52b2tlZFwiIH07XG4gICAgICBjYXNlIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5TaWduYXR1cmVIZWxwVHJpZ2dlcktpbmQuSW52b2tlOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHsga2luZDogXCJpbnZva2VkXCIgfTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgcHJvdmlkZVNpZ25hdHVyZUhlbHAobW9kZWwsIHBvc2l0aW9uLCB0b2tlbiwgY29udGV4dCkge1xuICAgIGNvbnN0IHJlc291cmNlID0gbW9kZWwudXJpO1xuICAgIGNvbnN0IG9mZnNldCA9IG1vZGVsLmdldE9mZnNldEF0KHBvc2l0aW9uKTtcbiAgICBjb25zdCB3b3JrZXIgPSBhd2FpdCB0aGlzLl93b3JrZXIocmVzb3VyY2UpO1xuICAgIGlmIChtb2RlbC5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IHdvcmtlci5nZXRTaWduYXR1cmVIZWxwSXRlbXMocmVzb3VyY2UudG9TdHJpbmcoKSwgb2Zmc2V0LCB7XG4gICAgICB0cmlnZ2VyUmVhc29uOiBTaWduYXR1cmVIZWxwQWRhcHRlci5fdG9TaWduYXR1cmVIZWxwVHJpZ2dlclJlYXNvbihjb250ZXh0KVxuICAgIH0pO1xuICAgIGlmICghaW5mbyB8fCBtb2RlbC5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcmV0ID0ge1xuICAgICAgYWN0aXZlU2lnbmF0dXJlOiBpbmZvLnNlbGVjdGVkSXRlbUluZGV4LFxuICAgICAgYWN0aXZlUGFyYW1ldGVyOiBpbmZvLmFyZ3VtZW50SW5kZXgsXG4gICAgICBzaWduYXR1cmVzOiBbXVxuICAgIH07XG4gICAgaW5mby5pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBzaWduYXR1cmUgPSB7XG4gICAgICAgIGxhYmVsOiBcIlwiLFxuICAgICAgICBwYXJhbWV0ZXJzOiBbXVxuICAgICAgfTtcbiAgICAgIHNpZ25hdHVyZS5kb2N1bWVudGF0aW9uID0ge1xuICAgICAgICB2YWx1ZTogZGlzcGxheVBhcnRzVG9TdHJpbmcoaXRlbS5kb2N1bWVudGF0aW9uKVxuICAgICAgfTtcbiAgICAgIHNpZ25hdHVyZS5sYWJlbCArPSBkaXNwbGF5UGFydHNUb1N0cmluZyhpdGVtLnByZWZpeERpc3BsYXlQYXJ0cyk7XG4gICAgICBpdGVtLnBhcmFtZXRlcnMuZm9yRWFjaCgocCwgaSwgYSkgPT4ge1xuICAgICAgICBjb25zdCBsYWJlbCA9IGRpc3BsYXlQYXJ0c1RvU3RyaW5nKHAuZGlzcGxheVBhcnRzKTtcbiAgICAgICAgY29uc3QgcGFyYW1ldGVyID0ge1xuICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgIGRvY3VtZW50YXRpb246IHtcbiAgICAgICAgICAgIHZhbHVlOiBkaXNwbGF5UGFydHNUb1N0cmluZyhwLmRvY3VtZW50YXRpb24pXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBzaWduYXR1cmUubGFiZWwgKz0gbGFiZWw7XG4gICAgICAgIHNpZ25hdHVyZS5wYXJhbWV0ZXJzLnB1c2gocGFyYW1ldGVyKTtcbiAgICAgICAgaWYgKGkgPCBhLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBzaWduYXR1cmUubGFiZWwgKz0gZGlzcGxheVBhcnRzVG9TdHJpbmcoaXRlbS5zZXBhcmF0b3JEaXNwbGF5UGFydHMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHNpZ25hdHVyZS5sYWJlbCArPSBkaXNwbGF5UGFydHNUb1N0cmluZyhpdGVtLnN1ZmZpeERpc3BsYXlQYXJ0cyk7XG4gICAgICByZXQuc2lnbmF0dXJlcy5wdXNoKHNpZ25hdHVyZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiByZXQsXG4gICAgICBkaXNwb3NlKCkge1xuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG52YXIgUXVpY2tJbmZvQWRhcHRlciA9IGNsYXNzIGV4dGVuZHMgQWRhcHRlciB7XG4gIGFzeW5jIHByb3ZpZGVIb3Zlcihtb2RlbCwgcG9zaXRpb24sIHRva2VuKSB7XG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbW9kZWwuZ2V0T2Zmc2V0QXQocG9zaXRpb24pO1xuICAgIGNvbnN0IHdvcmtlciA9IGF3YWl0IHRoaXMuX3dvcmtlcihyZXNvdXJjZSk7XG4gICAgaWYgKG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpbmZvID0gYXdhaXQgd29ya2VyLmdldFF1aWNrSW5mb0F0UG9zaXRpb24ocmVzb3VyY2UudG9TdHJpbmcoKSwgb2Zmc2V0KTtcbiAgICBpZiAoIWluZm8gfHwgbW9kZWwuaXNEaXNwb3NlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRvY3VtZW50YXRpb24gPSBkaXNwbGF5UGFydHNUb1N0cmluZyhpbmZvLmRvY3VtZW50YXRpb24pO1xuICAgIGNvbnN0IHRhZ3MgPSBpbmZvLnRhZ3MgPyBpbmZvLnRhZ3MubWFwKCh0YWcpID0+IHRhZ1RvU3RyaW5nKHRhZykpLmpvaW4oXCIgIFxcblxcblwiKSA6IFwiXCI7XG4gICAgY29uc3QgY29udGVudHMgPSBkaXNwbGF5UGFydHNUb1N0cmluZyhpbmZvLmRpc3BsYXlQYXJ0cyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJhbmdlOiB0aGlzLl90ZXh0U3BhblRvUmFuZ2UobW9kZWwsIGluZm8udGV4dFNwYW4pLFxuICAgICAgY29udGVudHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHZhbHVlOiBcImBgYHR5cGVzY3JpcHRcXG5cIiArIGNvbnRlbnRzICsgXCJcXG5gYGBcXG5cIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdmFsdWU6IGRvY3VtZW50YXRpb24gKyAodGFncyA/IFwiXFxuXFxuXCIgKyB0YWdzIDogXCJcIilcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG4gIH1cbn07XG52YXIgT2NjdXJyZW5jZXNBZGFwdGVyID0gY2xhc3MgZXh0ZW5kcyBBZGFwdGVyIHtcbiAgYXN5bmMgcHJvdmlkZURvY3VtZW50SGlnaGxpZ2h0cyhtb2RlbCwgcG9zaXRpb24sIHRva2VuKSB7XG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbW9kZWwuZ2V0T2Zmc2V0QXQocG9zaXRpb24pO1xuICAgIGNvbnN0IHdvcmtlciA9IGF3YWl0IHRoaXMuX3dvcmtlcihyZXNvdXJjZSk7XG4gICAgaWYgKG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgd29ya2VyLmdldE9jY3VycmVuY2VzQXRQb3NpdGlvbihyZXNvdXJjZS50b1N0cmluZygpLCBvZmZzZXQpO1xuICAgIGlmICghZW50cmllcyB8fCBtb2RlbC5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIGVudHJpZXMubWFwKChlbnRyeSkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmFuZ2U6IHRoaXMuX3RleHRTcGFuVG9SYW5nZShtb2RlbCwgZW50cnkudGV4dFNwYW4pLFxuICAgICAgICBraW5kOiBlbnRyeS5pc1dyaXRlQWNjZXNzID8gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLkRvY3VtZW50SGlnaGxpZ2h0S2luZC5Xcml0ZSA6IG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5Eb2N1bWVudEhpZ2hsaWdodEtpbmQuVGV4dFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxufTtcbnZhciBEZWZpbml0aW9uQWRhcHRlciA9IGNsYXNzIGV4dGVuZHMgQWRhcHRlciB7XG4gIGNvbnN0cnVjdG9yKF9saWJGaWxlcywgd29ya2VyKSB7XG4gICAgc3VwZXIod29ya2VyKTtcbiAgICB0aGlzLl9saWJGaWxlcyA9IF9saWJGaWxlcztcbiAgfVxuICBhc3luYyBwcm92aWRlRGVmaW5pdGlvbihtb2RlbCwgcG9zaXRpb24sIHRva2VuKSB7XG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbW9kZWwuZ2V0T2Zmc2V0QXQocG9zaXRpb24pO1xuICAgIGNvbnN0IHdvcmtlciA9IGF3YWl0IHRoaXMuX3dvcmtlcihyZXNvdXJjZSk7XG4gICAgaWYgKG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgd29ya2VyLmdldERlZmluaXRpb25BdFBvc2l0aW9uKHJlc291cmNlLnRvU3RyaW5nKCksIG9mZnNldCk7XG4gICAgaWYgKCFlbnRyaWVzIHx8IG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLl9saWJGaWxlcy5mZXRjaExpYkZpbGVzSWZOZWNlc3NhcnkoZW50cmllcy5tYXAoKGVudHJ5KSA9PiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5VcmkucGFyc2UoZW50cnkuZmlsZU5hbWUpKSk7XG4gICAgaWYgKG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBjb25zdCByZWZNb2RlbCA9IHRoaXMuX2xpYkZpbGVzLmdldE9yQ3JlYXRlTW9kZWwoZW50cnkuZmlsZU5hbWUpO1xuICAgICAgaWYgKHJlZk1vZGVsKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICB1cmk6IHJlZk1vZGVsLnVyaSxcbiAgICAgICAgICByYW5nZTogdGhpcy5fdGV4dFNwYW5Ub1JhbmdlKHJlZk1vZGVsLCBlbnRyeS50ZXh0U3BhbilcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn07XG52YXIgUmVmZXJlbmNlQWRhcHRlciA9IGNsYXNzIGV4dGVuZHMgQWRhcHRlciB7XG4gIGNvbnN0cnVjdG9yKF9saWJGaWxlcywgd29ya2VyKSB7XG4gICAgc3VwZXIod29ya2VyKTtcbiAgICB0aGlzLl9saWJGaWxlcyA9IF9saWJGaWxlcztcbiAgfVxuICBhc3luYyBwcm92aWRlUmVmZXJlbmNlcyhtb2RlbCwgcG9zaXRpb24sIGNvbnRleHQsIHRva2VuKSB7XG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbW9kZWwuZ2V0T2Zmc2V0QXQocG9zaXRpb24pO1xuICAgIGNvbnN0IHdvcmtlciA9IGF3YWl0IHRoaXMuX3dvcmtlcihyZXNvdXJjZSk7XG4gICAgaWYgKG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgd29ya2VyLmdldFJlZmVyZW5jZXNBdFBvc2l0aW9uKHJlc291cmNlLnRvU3RyaW5nKCksIG9mZnNldCk7XG4gICAgaWYgKCFlbnRyaWVzIHx8IG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLl9saWJGaWxlcy5mZXRjaExpYkZpbGVzSWZOZWNlc3NhcnkoZW50cmllcy5tYXAoKGVudHJ5KSA9PiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5VcmkucGFyc2UoZW50cnkuZmlsZU5hbWUpKSk7XG4gICAgaWYgKG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBjb25zdCByZWZNb2RlbCA9IHRoaXMuX2xpYkZpbGVzLmdldE9yQ3JlYXRlTW9kZWwoZW50cnkuZmlsZU5hbWUpO1xuICAgICAgaWYgKHJlZk1vZGVsKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICB1cmk6IHJlZk1vZGVsLnVyaSxcbiAgICAgICAgICByYW5nZTogdGhpcy5fdGV4dFNwYW5Ub1JhbmdlKHJlZk1vZGVsLCBlbnRyeS50ZXh0U3BhbilcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn07XG52YXIgT3V0bGluZUFkYXB0ZXIgPSBjbGFzcyBleHRlbmRzIEFkYXB0ZXIge1xuICBhc3luYyBwcm92aWRlRG9jdW1lbnRTeW1ib2xzKG1vZGVsLCB0b2tlbikge1xuICAgIGNvbnN0IHJlc291cmNlID0gbW9kZWwudXJpO1xuICAgIGNvbnN0IHdvcmtlciA9IGF3YWl0IHRoaXMuX3dvcmtlcihyZXNvdXJjZSk7XG4gICAgaWYgKG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpdGVtcyA9IGF3YWl0IHdvcmtlci5nZXROYXZpZ2F0aW9uQmFySXRlbXMocmVzb3VyY2UudG9TdHJpbmcoKSk7XG4gICAgaWYgKCFpdGVtcyB8fCBtb2RlbC5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29udmVydCA9IChidWNrZXQsIGl0ZW0sIGNvbnRhaW5lckxhYmVsKSA9PiB7XG4gICAgICBsZXQgcmVzdWx0MiA9IHtcbiAgICAgICAgbmFtZTogaXRlbS50ZXh0LFxuICAgICAgICBkZXRhaWw6IFwiXCIsXG4gICAgICAgIGtpbmQ6IG91dGxpbmVUeXBlVGFibGVbaXRlbS5raW5kXSB8fCBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuU3ltYm9sS2luZC5WYXJpYWJsZSxcbiAgICAgICAgcmFuZ2U6IHRoaXMuX3RleHRTcGFuVG9SYW5nZShtb2RlbCwgaXRlbS5zcGFuc1swXSksXG4gICAgICAgIHNlbGVjdGlvblJhbmdlOiB0aGlzLl90ZXh0U3BhblRvUmFuZ2UobW9kZWwsIGl0ZW0uc3BhbnNbMF0pLFxuICAgICAgICB0YWdzOiBbXVxuICAgICAgfTtcbiAgICAgIGlmIChjb250YWluZXJMYWJlbClcbiAgICAgICAgcmVzdWx0Mi5jb250YWluZXJOYW1lID0gY29udGFpbmVyTGFiZWw7XG4gICAgICBpZiAoaXRlbS5jaGlsZEl0ZW1zICYmIGl0ZW0uY2hpbGRJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIGl0ZW0uY2hpbGRJdGVtcykge1xuICAgICAgICAgIGNvbnZlcnQoYnVja2V0LCBjaGlsZCwgcmVzdWx0Mi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnVja2V0LnB1c2gocmVzdWx0Mik7XG4gICAgfTtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gY29udmVydChyZXN1bHQsIGl0ZW0pKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59O1xudmFyIEtpbmQgPSBjbGFzcyB7XG59O1xuX19wdWJsaWNGaWVsZChLaW5kLCBcInVua25vd25cIiwgXCJcIik7XG5fX3B1YmxpY0ZpZWxkKEtpbmQsIFwia2V5d29yZFwiLCBcImtleXdvcmRcIik7XG5fX3B1YmxpY0ZpZWxkKEtpbmQsIFwic2NyaXB0XCIsIFwic2NyaXB0XCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcIm1vZHVsZVwiLCBcIm1vZHVsZVwiKTtcbl9fcHVibGljRmllbGQoS2luZCwgXCJjbGFzc1wiLCBcImNsYXNzXCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcImludGVyZmFjZVwiLCBcImludGVyZmFjZVwiKTtcbl9fcHVibGljRmllbGQoS2luZCwgXCJ0eXBlXCIsIFwidHlwZVwiKTtcbl9fcHVibGljRmllbGQoS2luZCwgXCJlbnVtXCIsIFwiZW51bVwiKTtcbl9fcHVibGljRmllbGQoS2luZCwgXCJ2YXJpYWJsZVwiLCBcInZhclwiKTtcbl9fcHVibGljRmllbGQoS2luZCwgXCJsb2NhbFZhcmlhYmxlXCIsIFwibG9jYWwgdmFyXCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcImZ1bmN0aW9uXCIsIFwiZnVuY3Rpb25cIik7XG5fX3B1YmxpY0ZpZWxkKEtpbmQsIFwibG9jYWxGdW5jdGlvblwiLCBcImxvY2FsIGZ1bmN0aW9uXCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcIm1lbWJlckZ1bmN0aW9uXCIsIFwibWV0aG9kXCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcIm1lbWJlckdldEFjY2Vzc29yXCIsIFwiZ2V0dGVyXCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcIm1lbWJlclNldEFjY2Vzc29yXCIsIFwic2V0dGVyXCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcIm1lbWJlclZhcmlhYmxlXCIsIFwicHJvcGVydHlcIik7XG5fX3B1YmxpY0ZpZWxkKEtpbmQsIFwiY29uc3RydWN0b3JJbXBsZW1lbnRhdGlvblwiLCBcImNvbnN0cnVjdG9yXCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcImNhbGxTaWduYXR1cmVcIiwgXCJjYWxsXCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcImluZGV4U2lnbmF0dXJlXCIsIFwiaW5kZXhcIik7XG5fX3B1YmxpY0ZpZWxkKEtpbmQsIFwiY29uc3RydWN0U2lnbmF0dXJlXCIsIFwiY29uc3RydWN0XCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcInBhcmFtZXRlclwiLCBcInBhcmFtZXRlclwiKTtcbl9fcHVibGljRmllbGQoS2luZCwgXCJ0eXBlUGFyYW1ldGVyXCIsIFwidHlwZSBwYXJhbWV0ZXJcIik7XG5fX3B1YmxpY0ZpZWxkKEtpbmQsIFwicHJpbWl0aXZlVHlwZVwiLCBcInByaW1pdGl2ZSB0eXBlXCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcImxhYmVsXCIsIFwibGFiZWxcIik7XG5fX3B1YmxpY0ZpZWxkKEtpbmQsIFwiYWxpYXNcIiwgXCJhbGlhc1wiKTtcbl9fcHVibGljRmllbGQoS2luZCwgXCJjb25zdFwiLCBcImNvbnN0XCIpO1xuX19wdWJsaWNGaWVsZChLaW5kLCBcImxldFwiLCBcImxldFwiKTtcbl9fcHVibGljRmllbGQoS2luZCwgXCJ3YXJuaW5nXCIsIFwid2FybmluZ1wiKTtcbnZhciBvdXRsaW5lVHlwZVRhYmxlID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG5vdXRsaW5lVHlwZVRhYmxlW0tpbmQubW9kdWxlXSA9IG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5TeW1ib2xLaW5kLk1vZHVsZTtcbm91dGxpbmVUeXBlVGFibGVbS2luZC5jbGFzc10gPSBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuU3ltYm9sS2luZC5DbGFzcztcbm91dGxpbmVUeXBlVGFibGVbS2luZC5lbnVtXSA9IG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5TeW1ib2xLaW5kLkVudW07XG5vdXRsaW5lVHlwZVRhYmxlW0tpbmQuaW50ZXJmYWNlXSA9IG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5TeW1ib2xLaW5kLkludGVyZmFjZTtcbm91dGxpbmVUeXBlVGFibGVbS2luZC5tZW1iZXJGdW5jdGlvbl0gPSBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuU3ltYm9sS2luZC5NZXRob2Q7XG5vdXRsaW5lVHlwZVRhYmxlW0tpbmQubWVtYmVyVmFyaWFibGVdID0gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLlN5bWJvbEtpbmQuUHJvcGVydHk7XG5vdXRsaW5lVHlwZVRhYmxlW0tpbmQubWVtYmVyR2V0QWNjZXNzb3JdID0gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLlN5bWJvbEtpbmQuUHJvcGVydHk7XG5vdXRsaW5lVHlwZVRhYmxlW0tpbmQubWVtYmVyU2V0QWNjZXNzb3JdID0gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLlN5bWJvbEtpbmQuUHJvcGVydHk7XG5vdXRsaW5lVHlwZVRhYmxlW0tpbmQudmFyaWFibGVdID0gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLlN5bWJvbEtpbmQuVmFyaWFibGU7XG5vdXRsaW5lVHlwZVRhYmxlW0tpbmQuY29uc3RdID0gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLlN5bWJvbEtpbmQuVmFyaWFibGU7XG5vdXRsaW5lVHlwZVRhYmxlW0tpbmQubG9jYWxWYXJpYWJsZV0gPSBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuU3ltYm9sS2luZC5WYXJpYWJsZTtcbm91dGxpbmVUeXBlVGFibGVbS2luZC52YXJpYWJsZV0gPSBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuU3ltYm9sS2luZC5WYXJpYWJsZTtcbm91dGxpbmVUeXBlVGFibGVbS2luZC5mdW5jdGlvbl0gPSBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuU3ltYm9sS2luZC5GdW5jdGlvbjtcbm91dGxpbmVUeXBlVGFibGVbS2luZC5sb2NhbEZ1bmN0aW9uXSA9IG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5TeW1ib2xLaW5kLkZ1bmN0aW9uO1xudmFyIEZvcm1hdEhlbHBlciA9IGNsYXNzIGV4dGVuZHMgQWRhcHRlciB7XG4gIHN0YXRpYyBfY29udmVydE9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiB7XG4gICAgICBDb252ZXJ0VGFic1RvU3BhY2VzOiBvcHRpb25zLmluc2VydFNwYWNlcyxcbiAgICAgIFRhYlNpemU6IG9wdGlvbnMudGFiU2l6ZSxcbiAgICAgIEluZGVudFNpemU6IG9wdGlvbnMudGFiU2l6ZSxcbiAgICAgIEluZGVudFN0eWxlOiAyIC8qIFNtYXJ0ICovLFxuICAgICAgTmV3TGluZUNoYXJhY3RlcjogXCJcXG5cIixcbiAgICAgIEluc2VydFNwYWNlQWZ0ZXJDb21tYURlbGltaXRlcjogdHJ1ZSxcbiAgICAgIEluc2VydFNwYWNlQWZ0ZXJTZW1pY29sb25JbkZvclN0YXRlbWVudHM6IHRydWUsXG4gICAgICBJbnNlcnRTcGFjZUJlZm9yZUFuZEFmdGVyQmluYXJ5T3BlcmF0b3JzOiB0cnVlLFxuICAgICAgSW5zZXJ0U3BhY2VBZnRlcktleXdvcmRzSW5Db250cm9sRmxvd1N0YXRlbWVudHM6IHRydWUsXG4gICAgICBJbnNlcnRTcGFjZUFmdGVyRnVuY3Rpb25LZXl3b3JkRm9yQW5vbnltb3VzRnVuY3Rpb25zOiB0cnVlLFxuICAgICAgSW5zZXJ0U3BhY2VBZnRlck9wZW5pbmdBbmRCZWZvcmVDbG9zaW5nTm9uZW1wdHlQYXJlbnRoZXNpczogZmFsc2UsXG4gICAgICBJbnNlcnRTcGFjZUFmdGVyT3BlbmluZ0FuZEJlZm9yZUNsb3NpbmdOb25lbXB0eUJyYWNrZXRzOiBmYWxzZSxcbiAgICAgIEluc2VydFNwYWNlQWZ0ZXJPcGVuaW5nQW5kQmVmb3JlQ2xvc2luZ1RlbXBsYXRlU3RyaW5nQnJhY2VzOiBmYWxzZSxcbiAgICAgIFBsYWNlT3BlbkJyYWNlT25OZXdMaW5lRm9yQ29udHJvbEJsb2NrczogZmFsc2UsXG4gICAgICBQbGFjZU9wZW5CcmFjZU9uTmV3TGluZUZvckZ1bmN0aW9uczogZmFsc2VcbiAgICB9O1xuICB9XG4gIF9jb252ZXJ0VGV4dENoYW5nZXMobW9kZWwsIGNoYW5nZSkge1xuICAgIHJldHVybiB7XG4gICAgICB0ZXh0OiBjaGFuZ2UubmV3VGV4dCxcbiAgICAgIHJhbmdlOiB0aGlzLl90ZXh0U3BhblRvUmFuZ2UobW9kZWwsIGNoYW5nZS5zcGFuKVxuICAgIH07XG4gIH1cbn07XG52YXIgRm9ybWF0QWRhcHRlciA9IGNsYXNzIGV4dGVuZHMgRm9ybWF0SGVscGVyIHtcbiAgYXN5bmMgcHJvdmlkZURvY3VtZW50UmFuZ2VGb3JtYXR0aW5nRWRpdHMobW9kZWwsIHJhbmdlLCBvcHRpb25zLCB0b2tlbikge1xuICAgIGNvbnN0IHJlc291cmNlID0gbW9kZWwudXJpO1xuICAgIGNvbnN0IHN0YXJ0T2Zmc2V0ID0gbW9kZWwuZ2V0T2Zmc2V0QXQoe1xuICAgICAgbGluZU51bWJlcjogcmFuZ2Uuc3RhcnRMaW5lTnVtYmVyLFxuICAgICAgY29sdW1uOiByYW5nZS5zdGFydENvbHVtblxuICAgIH0pO1xuICAgIGNvbnN0IGVuZE9mZnNldCA9IG1vZGVsLmdldE9mZnNldEF0KHtcbiAgICAgIGxpbmVOdW1iZXI6IHJhbmdlLmVuZExpbmVOdW1iZXIsXG4gICAgICBjb2x1bW46IHJhbmdlLmVuZENvbHVtblxuICAgIH0pO1xuICAgIGNvbnN0IHdvcmtlciA9IGF3YWl0IHRoaXMuX3dvcmtlcihyZXNvdXJjZSk7XG4gICAgaWYgKG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBlZGl0cyA9IGF3YWl0IHdvcmtlci5nZXRGb3JtYXR0aW5nRWRpdHNGb3JSYW5nZShyZXNvdXJjZS50b1N0cmluZygpLCBzdGFydE9mZnNldCwgZW5kT2Zmc2V0LCBGb3JtYXRIZWxwZXIuX2NvbnZlcnRPcHRpb25zKG9wdGlvbnMpKTtcbiAgICBpZiAoIWVkaXRzIHx8IG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gZWRpdHMubWFwKChlZGl0KSA9PiB0aGlzLl9jb252ZXJ0VGV4dENoYW5nZXMobW9kZWwsIGVkaXQpKTtcbiAgfVxufTtcbnZhciBGb3JtYXRPblR5cGVBZGFwdGVyID0gY2xhc3MgZXh0ZW5kcyBGb3JtYXRIZWxwZXIge1xuICBnZXQgYXV0b0Zvcm1hdFRyaWdnZXJDaGFyYWN0ZXJzKCkge1xuICAgIHJldHVybiBbXCI7XCIsIFwifVwiLCBcIlxcblwiXTtcbiAgfVxuICBhc3luYyBwcm92aWRlT25UeXBlRm9ybWF0dGluZ0VkaXRzKG1vZGVsLCBwb3NpdGlvbiwgY2gsIG9wdGlvbnMsIHRva2VuKSB7XG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbW9kZWwuZ2V0T2Zmc2V0QXQocG9zaXRpb24pO1xuICAgIGNvbnN0IHdvcmtlciA9IGF3YWl0IHRoaXMuX3dvcmtlcihyZXNvdXJjZSk7XG4gICAgaWYgKG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBlZGl0cyA9IGF3YWl0IHdvcmtlci5nZXRGb3JtYXR0aW5nRWRpdHNBZnRlcktleXN0cm9rZShyZXNvdXJjZS50b1N0cmluZygpLCBvZmZzZXQsIGNoLCBGb3JtYXRIZWxwZXIuX2NvbnZlcnRPcHRpb25zKG9wdGlvbnMpKTtcbiAgICBpZiAoIWVkaXRzIHx8IG1vZGVsLmlzRGlzcG9zZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gZWRpdHMubWFwKChlZGl0KSA9PiB0aGlzLl9jb252ZXJ0VGV4dENoYW5nZXMobW9kZWwsIGVkaXQpKTtcbiAgfVxufTtcbnZhciBDb2RlQWN0aW9uQWRhcHRvciA9IGNsYXNzIGV4dGVuZHMgRm9ybWF0SGVscGVyIHtcbiAgYXN5bmMgcHJvdmlkZUNvZGVBY3Rpb25zKG1vZGVsLCByYW5nZSwgY29udGV4dCwgdG9rZW4pIHtcbiAgICBjb25zdCByZXNvdXJjZSA9IG1vZGVsLnVyaTtcbiAgICBjb25zdCBzdGFydCA9IG1vZGVsLmdldE9mZnNldEF0KHtcbiAgICAgIGxpbmVOdW1iZXI6IHJhbmdlLnN0YXJ0TGluZU51bWJlcixcbiAgICAgIGNvbHVtbjogcmFuZ2Uuc3RhcnRDb2x1bW5cbiAgICB9KTtcbiAgICBjb25zdCBlbmQgPSBtb2RlbC5nZXRPZmZzZXRBdCh7XG4gICAgICBsaW5lTnVtYmVyOiByYW5nZS5lbmRMaW5lTnVtYmVyLFxuICAgICAgY29sdW1uOiByYW5nZS5lbmRDb2x1bW5cbiAgICB9KTtcbiAgICBjb25zdCBmb3JtYXRPcHRpb25zID0gRm9ybWF0SGVscGVyLl9jb252ZXJ0T3B0aW9ucyhtb2RlbC5nZXRPcHRpb25zKCkpO1xuICAgIGNvbnN0IGVycm9yQ29kZXMgPSBjb250ZXh0Lm1hcmtlcnMuZmlsdGVyKChtKSA9PiBtLmNvZGUpLm1hcCgobSkgPT4gbS5jb2RlKS5tYXAoTnVtYmVyKTtcbiAgICBjb25zdCB3b3JrZXIgPSBhd2FpdCB0aGlzLl93b3JrZXIocmVzb3VyY2UpO1xuICAgIGlmIChtb2RlbC5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29kZUZpeGVzID0gYXdhaXQgd29ya2VyLmdldENvZGVGaXhlc0F0UG9zaXRpb24ocmVzb3VyY2UudG9TdHJpbmcoKSwgc3RhcnQsIGVuZCwgZXJyb3JDb2RlcywgZm9ybWF0T3B0aW9ucyk7XG4gICAgaWYgKCFjb2RlRml4ZXMgfHwgbW9kZWwuaXNEaXNwb3NlZCgpKSB7XG4gICAgICByZXR1cm4geyBhY3Rpb25zOiBbXSwgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgfSB9O1xuICAgIH1cbiAgICBjb25zdCBhY3Rpb25zID0gY29kZUZpeGVzLmZpbHRlcigoZml4KSA9PiB7XG4gICAgICByZXR1cm4gZml4LmNoYW5nZXMuZmlsdGVyKChjaGFuZ2UpID0+IGNoYW5nZS5pc05ld0ZpbGUpLmxlbmd0aCA9PT0gMDtcbiAgICB9KS5tYXAoKGZpeCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX3RzQ29kZUZpeEFjdGlvblRvTW9uYWNvQ29kZUFjdGlvbihtb2RlbCwgY29udGV4dCwgZml4KTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgYWN0aW9ucyxcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF90c0NvZGVGaXhBY3Rpb25Ub01vbmFjb0NvZGVBY3Rpb24obW9kZWwsIGNvbnRleHQsIGNvZGVGaXgpIHtcbiAgICBjb25zdCBlZGl0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgY2hhbmdlIG9mIGNvZGVGaXguY2hhbmdlcykge1xuICAgICAgZm9yIChjb25zdCB0ZXh0Q2hhbmdlIG9mIGNoYW5nZS50ZXh0Q2hhbmdlcykge1xuICAgICAgICBlZGl0cy5wdXNoKHtcbiAgICAgICAgICByZXNvdXJjZTogbW9kZWwudXJpLFxuICAgICAgICAgIGVkaXQ6IHtcbiAgICAgICAgICAgIHJhbmdlOiB0aGlzLl90ZXh0U3BhblRvUmFuZ2UobW9kZWwsIHRleHRDaGFuZ2Uuc3BhbiksXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0Q2hhbmdlLm5ld1RleHRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhY3Rpb24gPSB7XG4gICAgICB0aXRsZTogY29kZUZpeC5kZXNjcmlwdGlvbixcbiAgICAgIGVkaXQ6IHsgZWRpdHMgfSxcbiAgICAgIGRpYWdub3N0aWNzOiBjb250ZXh0Lm1hcmtlcnMsXG4gICAgICBraW5kOiBcInF1aWNrZml4XCJcbiAgICB9O1xuICAgIHJldHVybiBhY3Rpb247XG4gIH1cbn07XG52YXIgUmVuYW1lQWRhcHRlciA9IGNsYXNzIGV4dGVuZHMgQWRhcHRlciB7XG4gIGNvbnN0cnVjdG9yKF9saWJGaWxlcywgd29ya2VyKSB7XG4gICAgc3VwZXIod29ya2VyKTtcbiAgICB0aGlzLl9saWJGaWxlcyA9IF9saWJGaWxlcztcbiAgfVxuICBhc3luYyBwcm92aWRlUmVuYW1lRWRpdHMobW9kZWwsIHBvc2l0aW9uLCBuZXdOYW1lLCB0b2tlbikge1xuICAgIGNvbnN0IHJlc291cmNlID0gbW9kZWwudXJpO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gcmVzb3VyY2UudG9TdHJpbmcoKTtcbiAgICBjb25zdCBvZmZzZXQgPSBtb2RlbC5nZXRPZmZzZXRBdChwb3NpdGlvbik7XG4gICAgY29uc3Qgd29ya2VyID0gYXdhaXQgdGhpcy5fd29ya2VyKHJlc291cmNlKTtcbiAgICBpZiAobW9kZWwuaXNEaXNwb3NlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJlbmFtZUluZm8gPSBhd2FpdCB3b3JrZXIuZ2V0UmVuYW1lSW5mbyhmaWxlTmFtZSwgb2Zmc2V0LCB7XG4gICAgICBhbGxvd1JlbmFtZU9mSW1wb3J0UGF0aDogZmFsc2VcbiAgICB9KTtcbiAgICBpZiAocmVuYW1lSW5mby5jYW5SZW5hbWUgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBlZGl0czogW10sXG4gICAgICAgIHJlamVjdFJlYXNvbjogcmVuYW1lSW5mby5sb2NhbGl6ZWRFcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZW5hbWVJbmZvLmZpbGVUb1JlbmFtZSAhPT0gdm9pZCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZW5hbWluZyBmaWxlcyBpcyBub3Qgc3VwcG9ydGVkLlwiKTtcbiAgICB9XG4gICAgY29uc3QgcmVuYW1lTG9jYXRpb25zID0gYXdhaXQgd29ya2VyLmZpbmRSZW5hbWVMb2NhdGlvbnMoZmlsZU5hbWUsIG9mZnNldCwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7XG4gICAgaWYgKCFyZW5hbWVMb2NhdGlvbnMgfHwgbW9kZWwuaXNEaXNwb3NlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGVkaXRzID0gW107XG4gICAgZm9yIChjb25zdCByZW5hbWVMb2NhdGlvbiBvZiByZW5hbWVMb2NhdGlvbnMpIHtcbiAgICAgIGNvbnN0IG1vZGVsMiA9IHRoaXMuX2xpYkZpbGVzLmdldE9yQ3JlYXRlTW9kZWwocmVuYW1lTG9jYXRpb24uZmlsZU5hbWUpO1xuICAgICAgaWYgKG1vZGVsMikge1xuICAgICAgICBlZGl0cy5wdXNoKHtcbiAgICAgICAgICByZXNvdXJjZTogbW9kZWwyLnVyaSxcbiAgICAgICAgICBlZGl0OiB7XG4gICAgICAgICAgICByYW5nZTogdGhpcy5fdGV4dFNwYW5Ub1JhbmdlKG1vZGVsMiwgcmVuYW1lTG9jYXRpb24udGV4dFNwYW4pLFxuICAgICAgICAgICAgdGV4dDogbmV3TmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZmlsZSAke3JlbmFtZUxvY2F0aW9uLmZpbGVOYW1lfS5gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgZWRpdHMgfTtcbiAgfVxufTtcbnZhciBJbmxheUhpbnRzQWRhcHRlciA9IGNsYXNzIGV4dGVuZHMgQWRhcHRlciB7XG4gIGFzeW5jIHByb3ZpZGVJbmxheUhpbnRzKG1vZGVsLCByYW5nZSwgdG9rZW4pIHtcbiAgICBjb25zdCByZXNvdXJjZSA9IG1vZGVsLnVyaTtcbiAgICBjb25zdCBmaWxlTmFtZSA9IHJlc291cmNlLnRvU3RyaW5nKCk7XG4gICAgY29uc3Qgc3RhcnQgPSBtb2RlbC5nZXRPZmZzZXRBdCh7XG4gICAgICBsaW5lTnVtYmVyOiByYW5nZS5zdGFydExpbmVOdW1iZXIsXG4gICAgICBjb2x1bW46IHJhbmdlLnN0YXJ0Q29sdW1uXG4gICAgfSk7XG4gICAgY29uc3QgZW5kID0gbW9kZWwuZ2V0T2Zmc2V0QXQoe1xuICAgICAgbGluZU51bWJlcjogcmFuZ2UuZW5kTGluZU51bWJlcixcbiAgICAgIGNvbHVtbjogcmFuZ2UuZW5kQ29sdW1uXG4gICAgfSk7XG4gICAgY29uc3Qgd29ya2VyID0gYXdhaXQgdGhpcy5fd29ya2VyKHJlc291cmNlKTtcbiAgICBpZiAobW9kZWwuaXNEaXNwb3NlZCgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgdHNIaW50cyA9IGF3YWl0IHdvcmtlci5wcm92aWRlSW5sYXlIaW50cyhmaWxlTmFtZSwgc3RhcnQsIGVuZCk7XG4gICAgY29uc3QgaGludHMgPSB0c0hpbnRzLm1hcCgoaGludCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uaGludCxcbiAgICAgICAgbGFiZWw6IGhpbnQudGV4dCxcbiAgICAgICAgcG9zaXRpb246IG1vZGVsLmdldFBvc2l0aW9uQXQoaGludC5wb3NpdGlvbiksXG4gICAgICAgIGtpbmQ6IHRoaXMuX2NvbnZlcnRIaW50S2luZChoaW50LmtpbmQpXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiB7IGhpbnRzLCBkaXNwb3NlOiAoKSA9PiB7XG4gICAgfSB9O1xuICB9XG4gIF9jb252ZXJ0SGludEtpbmQoa2luZCkge1xuICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgY2FzZSBcIlBhcmFtZXRlclwiOlxuICAgICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLklubGF5SGludEtpbmQuUGFyYW1ldGVyO1xuICAgICAgY2FzZSBcIlR5cGVcIjpcbiAgICAgICAgcmV0dXJuIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5JbmxheUhpbnRLaW5kLlR5cGU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLklubGF5SGludEtpbmQuVHlwZTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5ndWFnZS90eXBlc2NyaXB0L3RzTW9kZS50c1xudmFyIGphdmFTY3JpcHRXb3JrZXI7XG52YXIgdHlwZVNjcmlwdFdvcmtlcjtcbmZ1bmN0aW9uIHNldHVwVHlwZVNjcmlwdChkZWZhdWx0cykge1xuICB0eXBlU2NyaXB0V29ya2VyID0gc2V0dXBNb2RlKGRlZmF1bHRzLCBcInR5cGVzY3JpcHRcIik7XG59XG5mdW5jdGlvbiBzZXR1cEphdmFTY3JpcHQoZGVmYXVsdHMpIHtcbiAgamF2YVNjcmlwdFdvcmtlciA9IHNldHVwTW9kZShkZWZhdWx0cywgXCJqYXZhc2NyaXB0XCIpO1xufVxuZnVuY3Rpb24gZ2V0SmF2YVNjcmlwdFdvcmtlcigpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBpZiAoIWphdmFTY3JpcHRXb3JrZXIpIHtcbiAgICAgIHJldHVybiByZWplY3QoXCJKYXZhU2NyaXB0IG5vdCByZWdpc3RlcmVkIVwiKTtcbiAgICB9XG4gICAgcmVzb2x2ZShqYXZhU2NyaXB0V29ya2VyKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRUeXBlU2NyaXB0V29ya2VyKCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGlmICghdHlwZVNjcmlwdFdvcmtlcikge1xuICAgICAgcmV0dXJuIHJlamVjdChcIlR5cGVTY3JpcHQgbm90IHJlZ2lzdGVyZWQhXCIpO1xuICAgIH1cbiAgICByZXNvbHZlKHR5cGVTY3JpcHRXb3JrZXIpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHNldHVwTW9kZShkZWZhdWx0cywgbW9kZUlkKSB7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBXb3JrZXJNYW5hZ2VyKG1vZGVJZCwgZGVmYXVsdHMpO1xuICBjb25zdCB3b3JrZXIgPSAoLi4udXJpcykgPT4ge1xuICAgIHJldHVybiBjbGllbnQuZ2V0TGFuZ3VhZ2VTZXJ2aWNlV29ya2VyKC4uLnVyaXMpO1xuICB9O1xuICBjb25zdCBsaWJGaWxlcyA9IG5ldyBMaWJGaWxlcyh3b3JrZXIpO1xuICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMucmVnaXN0ZXJDb21wbGV0aW9uSXRlbVByb3ZpZGVyKG1vZGVJZCwgbmV3IFN1Z2dlc3RBZGFwdGVyKHdvcmtlcikpO1xuICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMucmVnaXN0ZXJTaWduYXR1cmVIZWxwUHJvdmlkZXIobW9kZUlkLCBuZXcgU2lnbmF0dXJlSGVscEFkYXB0ZXIod29ya2VyKSk7XG4gIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlckhvdmVyUHJvdmlkZXIobW9kZUlkLCBuZXcgUXVpY2tJbmZvQWRhcHRlcih3b3JrZXIpKTtcbiAgbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLnJlZ2lzdGVyRG9jdW1lbnRIaWdobGlnaHRQcm92aWRlcihtb2RlSWQsIG5ldyBPY2N1cnJlbmNlc0FkYXB0ZXIod29ya2VyKSk7XG4gIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlckRlZmluaXRpb25Qcm92aWRlcihtb2RlSWQsIG5ldyBEZWZpbml0aW9uQWRhcHRlcihsaWJGaWxlcywgd29ya2VyKSk7XG4gIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlclJlZmVyZW5jZVByb3ZpZGVyKG1vZGVJZCwgbmV3IFJlZmVyZW5jZUFkYXB0ZXIobGliRmlsZXMsIHdvcmtlcikpO1xuICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMucmVnaXN0ZXJEb2N1bWVudFN5bWJvbFByb3ZpZGVyKG1vZGVJZCwgbmV3IE91dGxpbmVBZGFwdGVyKHdvcmtlcikpO1xuICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMucmVnaXN0ZXJEb2N1bWVudFJhbmdlRm9ybWF0dGluZ0VkaXRQcm92aWRlcihtb2RlSWQsIG5ldyBGb3JtYXRBZGFwdGVyKHdvcmtlcikpO1xuICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMucmVnaXN0ZXJPblR5cGVGb3JtYXR0aW5nRWRpdFByb3ZpZGVyKG1vZGVJZCwgbmV3IEZvcm1hdE9uVHlwZUFkYXB0ZXIod29ya2VyKSk7XG4gIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlckNvZGVBY3Rpb25Qcm92aWRlcihtb2RlSWQsIG5ldyBDb2RlQWN0aW9uQWRhcHRvcih3b3JrZXIpKTtcbiAgbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLnJlZ2lzdGVyUmVuYW1lUHJvdmlkZXIobW9kZUlkLCBuZXcgUmVuYW1lQWRhcHRlcihsaWJGaWxlcywgd29ya2VyKSk7XG4gIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlcklubGF5SGludHNQcm92aWRlcihtb2RlSWQsIG5ldyBJbmxheUhpbnRzQWRhcHRlcih3b3JrZXIpKTtcbiAgbmV3IERpYWdub3N0aWNzQWRhcHRlcihsaWJGaWxlcywgZGVmYXVsdHMsIG1vZGVJZCwgd29ya2VyKTtcbiAgcmV0dXJuIHdvcmtlcjtcbn1cbmV4cG9ydCB7XG4gIEFkYXB0ZXIsXG4gIENvZGVBY3Rpb25BZGFwdG9yLFxuICBEZWZpbml0aW9uQWRhcHRlcixcbiAgRGlhZ25vc3RpY3NBZGFwdGVyLFxuICBGb3JtYXRBZGFwdGVyLFxuICBGb3JtYXRIZWxwZXIsXG4gIEZvcm1hdE9uVHlwZUFkYXB0ZXIsXG4gIElubGF5SGludHNBZGFwdGVyLFxuICBLaW5kLFxuICBMaWJGaWxlcyxcbiAgT2NjdXJyZW5jZXNBZGFwdGVyLFxuICBPdXRsaW5lQWRhcHRlcixcbiAgUXVpY2tJbmZvQWRhcHRlcixcbiAgUmVmZXJlbmNlQWRhcHRlcixcbiAgUmVuYW1lQWRhcHRlcixcbiAgU2lnbmF0dXJlSGVscEFkYXB0ZXIsXG4gIFN1Z2dlc3RBZGFwdGVyLFxuICBXb3JrZXJNYW5hZ2VyLFxuICBmbGF0dGVuRGlhZ25vc3RpY01lc3NhZ2VUZXh0LFxuICBnZXRKYXZhU2NyaXB0V29ya2VyLFxuICBnZXRUeXBlU2NyaXB0V29ya2VyLFxuICBzZXR1cEphdmFTY3JpcHQsXG4gIHNldHVwVHlwZVNjcmlwdFxufTtcbiJdLCJuYW1lcyI6WyJfX2RlZlByb3AiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fZ2V0T3duUHJvcERlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJfX2dldE93blByb3BOYW1lcyIsImdldE93blByb3BlcnR5TmFtZXMiLCJfX2hhc093blByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsIl9fcHVibGljRmllbGQiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIl9fZGVmTm9ybWFsUHJvcCIsIm1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzIiwidGFyZ2V0IiwibW9kdWxlIiwiY29weURlZmF1bHQiLCJkZXNjIiwiY2FsbCIsImdldCIsIl9fcmVFeHBvcnQiLCJXb3JrZXJNYW5hZ2VyIiwiX21vZGVJZCIsIl9kZWZhdWx0cyIsIl9jb25maWdDaGFuZ2VMaXN0ZW5lciIsIl91cGRhdGVFeHRyYUxpYnNUb2tlbiIsIl9leHRyYUxpYnNDaGFuZ2VMaXN0ZW5lciIsIl93b3JrZXIiLCJfY2xpZW50IiwiY29uc3RydWN0b3IiLCJtb2RlSWQiLCJkZWZhdWx0cyIsInRoaXMiLCJvbkRpZENoYW5nZSIsIl9zdG9wV29ya2VyIiwib25EaWRFeHRyYUxpYnNDaGFuZ2UiLCJfdXBkYXRlRXh0cmFMaWJzIiwiZGlzcG9zZSIsImFzeW5jIiwibXlUb2tlbiIsInByb3h5IiwiZ2V0UHJveHkiLCJ1cGRhdGVFeHRyYUxpYnMiLCJnZXRFeHRyYUxpYnMiLCJfZ2V0Q2xpZW50IiwiZWRpdG9yIiwiY3JlYXRlV2ViV29ya2VyIiwibW9kdWxlSWQiLCJsYWJlbCIsImtlZXBJZGxlTW9kZWxzIiwiY3JlYXRlRGF0YSIsImNvbXBpbGVyT3B0aW9ucyIsImdldENvbXBpbGVyT3B0aW9ucyIsImV4dHJhTGlicyIsImN1c3RvbVdvcmtlclBhdGgiLCJ3b3JrZXJPcHRpb25zIiwiaW5sYXlIaW50c09wdGlvbnMiLCJwIiwiZ2V0RWFnZXJNb2RlbFN5bmMiLCJ0aGVuIiwid29ya2VyIiwid2l0aFN5bmNlZFJlc291cmNlcyIsImdldE1vZGVscyIsImZpbHRlciIsIm1vZGVsIiwiZ2V0TGFuZ3VhZ2VJZCIsIm1hcCIsInVyaSIsImdldExhbmd1YWdlU2VydmljZVdvcmtlciIsInJlc291cmNlcyIsImNsaWVudCIsIl8iLCJsaWJGaWxlU2V0IiwiZmxhdHRlbkRpYWdub3N0aWNNZXNzYWdlVGV4dCIsImRpYWciLCJuZXdMaW5lIiwiaW5kZW50IiwicmVzdWx0IiwiaSIsIm1lc3NhZ2VUZXh0IiwibmV4dCIsImtpZCIsImRpc3BsYXlQYXJ0c1RvU3RyaW5nIiwiZGlzcGxheVBhcnRzIiwiZGlzcGxheVBhcnQiLCJ0ZXh0Iiwiam9pbiIsIkFkYXB0ZXIiLCJfdGV4dFNwYW5Ub1JhbmdlIiwic3BhbiIsInAxIiwiZ2V0UG9zaXRpb25BdCIsInN0YXJ0IiwicDIiLCJsZW5ndGgiLCJsaW5lTnVtYmVyIiwic3RhcnRMaW5lTnVtYmVyIiwiY29sdW1uIiwic3RhcnRDb2x1bW4iLCJlbmRMaW5lTnVtYmVyIiwiZW5kQ29sdW1uIiwiTGliRmlsZXMiLCJfbGliRmlsZXMiLCJfaGFzRmV0Y2hlZExpYkZpbGVzIiwiX2ZldGNoTGliRmlsZXNQcm9taXNlIiwiaXNMaWJGaWxlIiwicGF0aCIsImluZGV4T2YiLCJzbGljZSIsImdldE9yQ3JlYXRlTW9kZWwiLCJmaWxlTmFtZSIsIlVyaSIsInBhcnNlIiwiZ2V0TW9kZWwiLCJjcmVhdGVNb2RlbCIsIm1hdGNoZWRMaWJGaWxlIiwidHlwZXNjcmlwdERlZmF1bHRzIiwiY29udGVudCIsIl9jb250YWluc0xpYkZpbGUiLCJ1cmlzIiwiX2ZldGNoTGliRmlsZXMiLCJ3IiwiZ2V0TGliRmlsZXMiLCJsaWJGaWxlcyIsIkRpYWdub3N0aWNzQWRhcHRlciIsIl9zZWxlY3RvciIsInN1cGVyIiwib25Nb2RlbEFkZCIsIm1heWJlVmFsaWRhdGUiLCJvbmx5VmlzaWJsZSIsImdldERpYWdub3N0aWNzT3B0aW9ucyIsImlzQXR0YWNoZWRUb0VkaXRvciIsIl9kb1ZhbGlkYXRlIiwiaGFuZGxlIiwiY2hhbmdlU3Vic2NyaXB0aW9uIiwib25EaWRDaGFuZ2VDb250ZW50IiwiY2xlYXJUaW1lb3V0Iiwid2luZG93Iiwic2V0VGltZW91dCIsInZpc2libGVTdWJzY3JpcHRpb24iLCJvbkRpZENoYW5nZUF0dGFjaGVkIiwic2V0TW9kZWxNYXJrZXJzIiwiX2xpc3RlbmVyIiwidG9TdHJpbmciLCJvbk1vZGVsUmVtb3ZlZCIsIl9kaXNwb3NhYmxlcyIsInB1c2giLCJvbkRpZENyZWF0ZU1vZGVsIiwib25XaWxsRGlzcG9zZU1vZGVsIiwib25EaWRDaGFuZ2VNb2RlbExhbmd1YWdlIiwiZXZlbnQiLCJyZWNvbXB1dGVEaWFnb3N0aWNzIiwiZm9yRWFjaCIsImNyZWF0ZSIsImQiLCJpc0Rpc3Bvc2VkIiwicHJvbWlzZXMiLCJub1N5bnRheFZhbGlkYXRpb24iLCJub1NlbWFudGljVmFsaWRhdGlvbiIsIm5vU3VnZ2VzdGlvbkRpYWdub3N0aWNzIiwiZ2V0U3ludGFjdGljRGlhZ25vc3RpY3MiLCJnZXRTZW1hbnRpY0RpYWdub3N0aWNzIiwiZ2V0U3VnZ2VzdGlvbkRpYWdub3N0aWNzIiwiYWxsRGlhZ25vc3RpY3MiLCJQcm9taXNlIiwiYWxsIiwiZGlhZ25vc3RpY3MiLCJyZWR1Y2UiLCJjIiwiY29uY2F0IiwiZGlhZ25vc3RpY0NvZGVzVG9JZ25vcmUiLCJjb2RlIiwicmVsYXRlZFVyaXMiLCJyZWxhdGVkSW5mb3JtYXRpb24iLCJmaWxlIiwiZmV0Y2hMaWJGaWxlc0lmTmVjZXNzYXJ5IiwiX2NvbnZlcnREaWFnbm9zdGljcyIsImRpYWdTdGFydCIsImRpYWdMZW5ndGgiLCJ0YWdzIiwicmVwb3J0c1VubmVjZXNzYXJ5IiwiTWFya2VyVGFnIiwiVW5uZWNlc3NhcnkiLCJyZXBvcnRzRGVwcmVjYXRlZCIsIkRlcHJlY2F0ZWQiLCJzZXZlcml0eSIsIl90c0RpYWdub3N0aWNDYXRlZ29yeVRvTWFya2VyU2V2ZXJpdHkiLCJjYXRlZ29yeSIsIm1lc3NhZ2UiLCJfY29udmVydFJlbGF0ZWRJbmZvcm1hdGlvbiIsImluZm8iLCJyZWxhdGVkUmVzb3VyY2UiLCJpbmZvU3RhcnQiLCJpbmZvTGVuZ3RoIiwicmVzb3VyY2UiLCJNYXJrZXJTZXZlcml0eSIsIkVycm9yIiwiSW5mbyIsIldhcm5pbmciLCJIaW50IiwiU3VnZ2VzdEFkYXB0ZXIiLCJ0cmlnZ2VyQ2hhcmFjdGVycyIsInBvc2l0aW9uIiwiX2NvbnRleHQiLCJ0b2tlbiIsIndvcmRJbmZvIiwiZ2V0V29yZFVudGlsUG9zaXRpb24iLCJ3b3JkUmFuZ2UiLCJSYW5nZSIsIm9mZnNldCIsImdldE9mZnNldEF0IiwiZ2V0Q29tcGxldGlvbnNBdFBvc2l0aW9uIiwic3VnZ2VzdGlvbnMiLCJlbnRyaWVzIiwiZW50cnkiLCJyYW5nZSIsInJlcGxhY2VtZW50U3BhbiIsImtpbmRNb2RpZmllcnMiLCJsYW5ndWFnZXMiLCJDb21wbGV0aW9uSXRlbVRhZyIsIm5hbWUiLCJpbnNlcnRUZXh0Iiwic29ydFRleHQiLCJraW5kIiwiY29udmVydEtpbmQiLCJpdGVtIiwibXlJdGVtIiwiZGV0YWlscyIsImdldENvbXBsZXRpb25FbnRyeURldGFpbHMiLCJkZXRhaWwiLCJkb2N1bWVudGF0aW9uIiwiY3JlYXRlRG9jdW1lbnRhdGlvblN0cmluZyIsInN0YXRpYyIsIktpbmQiLCJwcmltaXRpdmVUeXBlIiwia2V5d29yZCIsIkNvbXBsZXRpb25JdGVtS2luZCIsIktleXdvcmQiLCJ2YXJpYWJsZSIsImxvY2FsVmFyaWFibGUiLCJWYXJpYWJsZSIsIm1lbWJlclZhcmlhYmxlIiwibWVtYmVyR2V0QWNjZXNzb3IiLCJtZW1iZXJTZXRBY2Nlc3NvciIsIkZpZWxkIiwiZnVuY3Rpb24iLCJtZW1iZXJGdW5jdGlvbiIsImNvbnN0cnVjdFNpZ25hdHVyZSIsImNhbGxTaWduYXR1cmUiLCJpbmRleFNpZ25hdHVyZSIsIkZ1bmN0aW9uIiwiZW51bSIsIkVudW0iLCJNb2R1bGUiLCJjbGFzcyIsIkNsYXNzIiwiaW50ZXJmYWNlIiwiSW50ZXJmYWNlIiwid2FybmluZyIsIkZpbGUiLCJQcm9wZXJ0eSIsImRvY3VtZW50YXRpb25TdHJpbmciLCJ0YWciLCJ0YWdUb1N0cmluZyIsInRhZ0xhYmVsIiwicGFyYW1OYW1lIiwicmVzdCIsInIiLCJBcnJheSIsImlzQXJyYXkiLCJTaWduYXR1cmVIZWxwQWRhcHRlciIsInNpZ25hdHVyZUhlbHBUcmlnZ2VyQ2hhcmFjdGVycyIsImNvbnRleHQiLCJ0cmlnZ2VyS2luZCIsIlNpZ25hdHVyZUhlbHBUcmlnZ2VyS2luZCIsIlRyaWdnZXJDaGFyYWN0ZXIiLCJ0cmlnZ2VyQ2hhcmFjdGVyIiwiaXNSZXRyaWdnZXIiLCJDb250ZW50Q2hhbmdlIiwiSW52b2tlIiwiZ2V0U2lnbmF0dXJlSGVscEl0ZW1zIiwidHJpZ2dlclJlYXNvbiIsIl90b1NpZ25hdHVyZUhlbHBUcmlnZ2VyUmVhc29uIiwicmV0IiwiYWN0aXZlU2lnbmF0dXJlIiwic2VsZWN0ZWRJdGVtSW5kZXgiLCJhY3RpdmVQYXJhbWV0ZXIiLCJhcmd1bWVudEluZGV4Iiwic2lnbmF0dXJlcyIsIml0ZW1zIiwic2lnbmF0dXJlIiwicGFyYW1ldGVycyIsInByZWZpeERpc3BsYXlQYXJ0cyIsImEiLCJwYXJhbWV0ZXIiLCJzZXBhcmF0b3JEaXNwbGF5UGFydHMiLCJzdWZmaXhEaXNwbGF5UGFydHMiLCJRdWlja0luZm9BZGFwdGVyIiwiZ2V0UXVpY2tJbmZvQXRQb3NpdGlvbiIsImNvbnRlbnRzIiwidGV4dFNwYW4iLCJPY2N1cnJlbmNlc0FkYXB0ZXIiLCJnZXRPY2N1cnJlbmNlc0F0UG9zaXRpb24iLCJpc1dyaXRlQWNjZXNzIiwiRG9jdW1lbnRIaWdobGlnaHRLaW5kIiwiV3JpdGUiLCJUZXh0IiwiRGVmaW5pdGlvbkFkYXB0ZXIiLCJnZXREZWZpbml0aW9uQXRQb3NpdGlvbiIsInJlZk1vZGVsIiwiUmVmZXJlbmNlQWRhcHRlciIsImdldFJlZmVyZW5jZXNBdFBvc2l0aW9uIiwiT3V0bGluZUFkYXB0ZXIiLCJnZXROYXZpZ2F0aW9uQmFySXRlbXMiLCJjb252ZXJ0IiwiYnVja2V0IiwiY29udGFpbmVyTGFiZWwiLCJyZXN1bHQyIiwib3V0bGluZVR5cGVUYWJsZSIsIlN5bWJvbEtpbmQiLCJzcGFucyIsInNlbGVjdGlvblJhbmdlIiwiY29udGFpbmVyTmFtZSIsImNoaWxkSXRlbXMiLCJjaGlsZCIsIk1ldGhvZCIsImNvbnN0IiwibG9jYWxGdW5jdGlvbiIsImphdmFTY3JpcHRXb3JrZXIiLCJ0eXBlU2NyaXB0V29ya2VyIiwiRm9ybWF0SGVscGVyIiwib3B0aW9ucyIsIkNvbnZlcnRUYWJzVG9TcGFjZXMiLCJpbnNlcnRTcGFjZXMiLCJUYWJTaXplIiwidGFiU2l6ZSIsIkluZGVudFNpemUiLCJJbmRlbnRTdHlsZSIsIk5ld0xpbmVDaGFyYWN0ZXIiLCJJbnNlcnRTcGFjZUFmdGVyQ29tbWFEZWxpbWl0ZXIiLCJJbnNlcnRTcGFjZUFmdGVyU2VtaWNvbG9uSW5Gb3JTdGF0ZW1lbnRzIiwiSW5zZXJ0U3BhY2VCZWZvcmVBbmRBZnRlckJpbmFyeU9wZXJhdG9ycyIsIkluc2VydFNwYWNlQWZ0ZXJLZXl3b3Jkc0luQ29udHJvbEZsb3dTdGF0ZW1lbnRzIiwiSW5zZXJ0U3BhY2VBZnRlckZ1bmN0aW9uS2V5d29yZEZvckFub255bW91c0Z1bmN0aW9ucyIsIkluc2VydFNwYWNlQWZ0ZXJPcGVuaW5nQW5kQmVmb3JlQ2xvc2luZ05vbmVtcHR5UGFyZW50aGVzaXMiLCJJbnNlcnRTcGFjZUFmdGVyT3BlbmluZ0FuZEJlZm9yZUNsb3NpbmdOb25lbXB0eUJyYWNrZXRzIiwiSW5zZXJ0U3BhY2VBZnRlck9wZW5pbmdBbmRCZWZvcmVDbG9zaW5nVGVtcGxhdGVTdHJpbmdCcmFjZXMiLCJQbGFjZU9wZW5CcmFjZU9uTmV3TGluZUZvckNvbnRyb2xCbG9ja3MiLCJQbGFjZU9wZW5CcmFjZU9uTmV3TGluZUZvckZ1bmN0aW9ucyIsIl9jb252ZXJ0VGV4dENoYW5nZXMiLCJjaGFuZ2UiLCJuZXdUZXh0IiwiRm9ybWF0QWRhcHRlciIsInN0YXJ0T2Zmc2V0IiwiZW5kT2Zmc2V0IiwiZWRpdHMiLCJnZXRGb3JtYXR0aW5nRWRpdHNGb3JSYW5nZSIsIl9jb252ZXJ0T3B0aW9ucyIsImVkaXQiLCJGb3JtYXRPblR5cGVBZGFwdGVyIiwiYXV0b0Zvcm1hdFRyaWdnZXJDaGFyYWN0ZXJzIiwiY2giLCJnZXRGb3JtYXR0aW5nRWRpdHNBZnRlcktleXN0cm9rZSIsIkNvZGVBY3Rpb25BZGFwdG9yIiwiZW5kIiwiZm9ybWF0T3B0aW9ucyIsImdldE9wdGlvbnMiLCJlcnJvckNvZGVzIiwibWFya2VycyIsIm0iLCJOdW1iZXIiLCJjb2RlRml4ZXMiLCJnZXRDb2RlRml4ZXNBdFBvc2l0aW9uIiwiYWN0aW9ucyIsImZpeCIsImNoYW5nZXMiLCJpc05ld0ZpbGUiLCJfdHNDb2RlRml4QWN0aW9uVG9Nb25hY29Db2RlQWN0aW9uIiwiY29kZUZpeCIsInRleHRDaGFuZ2UiLCJ0ZXh0Q2hhbmdlcyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJSZW5hbWVBZGFwdGVyIiwibmV3TmFtZSIsInJlbmFtZUluZm8iLCJnZXRSZW5hbWVJbmZvIiwiYWxsb3dSZW5hbWVPZkltcG9ydFBhdGgiLCJjYW5SZW5hbWUiLCJyZWplY3RSZWFzb24iLCJsb2NhbGl6ZWRFcnJvck1lc3NhZ2UiLCJmaWxlVG9SZW5hbWUiLCJyZW5hbWVMb2NhdGlvbnMiLCJmaW5kUmVuYW1lTG9jYXRpb25zIiwicmVuYW1lTG9jYXRpb24iLCJtb2RlbDIiLCJJbmxheUhpbnRzQWRhcHRlciIsImhpbnRzIiwicHJvdmlkZUlubGF5SGludHMiLCJoaW50IiwiX2NvbnZlcnRIaW50S2luZCIsIklubGF5SGludEtpbmQiLCJQYXJhbWV0ZXIiLCJUeXBlIiwic2V0dXBUeXBlU2NyaXB0Iiwic2V0dXBNb2RlIiwic2V0dXBKYXZhU2NyaXB0IiwiZ2V0SmF2YVNjcmlwdFdvcmtlciIsInJlc29sdmUiLCJyZWplY3QiLCJnZXRUeXBlU2NyaXB0V29ya2VyIiwicmVnaXN0ZXJDb21wbGV0aW9uSXRlbVByb3ZpZGVyIiwicmVnaXN0ZXJTaWduYXR1cmVIZWxwUHJvdmlkZXIiLCJyZWdpc3RlckhvdmVyUHJvdmlkZXIiLCJyZWdpc3RlckRvY3VtZW50SGlnaGxpZ2h0UHJvdmlkZXIiLCJyZWdpc3RlckRlZmluaXRpb25Qcm92aWRlciIsInJlZ2lzdGVyUmVmZXJlbmNlUHJvdmlkZXIiLCJyZWdpc3RlckRvY3VtZW50U3ltYm9sUHJvdmlkZXIiLCJyZWdpc3RlckRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nRWRpdFByb3ZpZGVyIiwicmVnaXN0ZXJPblR5cGVGb3JtYXR0aW5nRWRpdFByb3ZpZGVyIiwicmVnaXN0ZXJDb2RlQWN0aW9uUHJvdmlkZXIiLCJyZWdpc3RlclJlbmFtZVByb3ZpZGVyIiwicmVnaXN0ZXJJbmxheUhpbnRzUHJvdmlkZXIiXSwic291cmNlUm9vdCI6IiJ9